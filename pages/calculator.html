<!DOCTYPE html>
<html lang="zh-TW">
<head>

    <meta charset="UTF-8">
	<meta name="viewport" content="width=400, user-scalable=no">

    <!-- åœ¨ç¾æœ‰çš„ meta æ¨™ç±¤ä¸‹æ–¹æ·»åŠ  -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <title>å°æœ‹å‹è¨ˆç®—æ©Ÿ - è¨ˆç®—é é¢</title>

    <style>

        /* ============================================
        * CSS è®Šæ•¸å®šç¾©å€åŸŸ - çµ±ä¸€ç®¡ç†æ‰€æœ‰å¤–è§€ç›¸é—œè®Šæ•¸
        * ============================================ */

        /* åŸºç¤å…¨åŸŸè®Šæ•¸å®šç¾© */
        :root {
            /* ========== å°ºå¯¸ç›¸é—œè®Šæ•¸ ========== */
            /* åœ“è§’å°ºå¯¸ */
            --border-radius-sm: 4px;              /* å°å‹å…ƒç´ åœ“è§’ï¼ˆæŒ‰éˆ•ã€è¼¸å…¥æ¡†ï¼‰ */
            --border-radius-md: 8px;              /* ä¸­å‹å…ƒç´ åœ“è§’ï¼ˆå¡ç‰‡ï¼‰ */
            --border-radius-lg: 12px;             /* å¤§å‹å…ƒç´ åœ“è§’ï¼ˆæ¨¡æ…‹æ¡†ï¼‰ */
            
            /* é–“è·å°ºå¯¸ */
            --spacing-xs: 2px;                    /* æ¥µå°é–“è· */
            --spacing-sm: 4px;                    /* å°é–“è· */
            --spacing-md: 8px;                    /* ä¸­é–“è· */
            --spacing-lg: 15px;                   /* å¤§é–“è· */
            
            /* å­—é«”å¤§å° */
            --font-size-xs: 12px;                 /* æ¥µå°å­—é«”ï¼ˆæ¨™ç±¤èªªæ˜ï¼‰ */
            --font-size-sm: 14px;                 /* å°å­—é«”ï¼ˆæ¬¡è¦æ–‡å­—ï¼‰ */
            --font-size-md: 16px;                 /* ä¸­å­—é«”ï¼ˆä¸€èˆ¬å…§å®¹ï¼‰ */
            --font-size-lg: 18px;                 /* å¤§å­—é«”ï¼ˆé‡è¦å…§å®¹ï¼‰ */
            --font-size-xl: 22px;                 /* ç‰¹å¤§å­—é«”ï¼ˆæ¨™é¡Œï¼‰ */
            
            /* ç‰¹æ®Šå…ƒç´ å­—é«”å¤§å° */
            --input-font-size: 16px;              /* è¼¸å…¥æ¡†æ–‡å­—å¤§å° */
            --label-font-size: 16px;              /* æ¨™ç±¤æ–‡å­—å¤§å° */
            
            /* è¼¸å…¥æ¡†ç‰¹æ®Šè¨­å®š */
            --input-padding-lr: 5px;              /* è¼¸å…¥æ¡†å·¦å³å…§é‚Šè· */
            
            /* å‹•ç•«æ™‚é–“ */
            --transition-fast: 0.2s;              /* å¿«é€Ÿéæ¸¡å‹•ç•« */
            --transition-normal: 0.3s;            /* æ¨™æº–éæ¸¡å‹•ç•« */
            --transition-slow: 0.5s;              /* æ…¢é€Ÿéæ¸¡å‹•ç•« */
            
            /* é™°å½±æ•ˆæœ */
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);    /* æ·ºå±¤é™°å½± */
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);    /* ä¸­å±¤é™°å½± */
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.4);   /* æ·±å±¤é™°å½± */
        }

        /* ========== ä¸»é¡Œè‰²å½©å®šç¾© ========== */
        /* é è¨­ä¸»é¡Œï¼šæš—å¤œæ©˜ç„° */
        :root {
            /* RGB è‰²å½©å€¼ï¼ˆç”¨æ–¼é€æ˜åº¦èª¿æ•´ï¼‰ */
            --primary-color-rgb: 51, 51, 51;              /* ä¸»èƒŒæ™¯è‰² RGB */
            --secondary-color-rgb: 74, 74, 74;            /* æ¬¡èƒŒæ™¯è‰² RGB */
            --accent-color-rgb: 255, 156, 51;             /* å¼·èª¿è‰² RGB */
            --input-bg-rgb: 34, 34, 34;                   /* è¼¸å…¥æ¡†èƒŒæ™¯ RGB */
            --error-color-rgb: 231, 76, 60;               /* éŒ¯èª¤è‰² RGB */
            --info-color-rgb: 52, 152, 219;               /* è³‡è¨Šè‰² RGB */
            
            /* åŸºæœ¬è‰²å½© */
            --primary-color: #333333;                      /* ä¸»è¦èƒŒæ™¯è‰² */
            --secondary-color: #4a4a4a;                    /* æ¬¡è¦èƒŒæ™¯è‰² */
            --text-color: #ffffff;                         /* æ–‡å­—é¡è‰² */
            --text-muted: #999999;                         /* æ·¡åŒ–æ–‡å­—é¡è‰² */
            --border-color: #555555;                       /* é‚Šæ¡†é¡è‰² */
            --hover-color: #666666;                        /* æ‡¸åœèƒŒæ™¯è‰² */
            --shadow-color: rgba(0, 0, 0, 0.3);           /* é™°å½±é¡è‰² */
            
            /* åŠŸèƒ½è‰²å½© */
            --accent-color: #ff9c33;                       /* å¼·èª¿è‰²ï¼ˆæ©˜è‰²ï¼‰ */
            --accent-color-light: rgba(255, 156, 51, 0.2); /* æ·¡å¼·èª¿è‰² */
            --accent-color-dark: #e88a22;                  /* æ·±å¼·èª¿è‰² */
            --success-color: #33b5e5;                      /* æˆåŠŸè‰²ï¼ˆè—è‰²ï¼‰ */
            --warning-color: #ff9c33;                      /* è­¦å‘Šè‰²ï¼ˆæ©˜è‰²ï¼‰ */
            --error-color: #e74c3c;                        /* éŒ¯èª¤è‰²ï¼ˆç´…è‰²ï¼‰ */
            --info-color: #3498db;                         /* è³‡è¨Šè‰²ï¼ˆè—è‰²ï¼‰ */
            
            /* å…ƒä»¶å°ˆç”¨è‰²å½© */
            --button-primary: #ff9c33;                     /* ä¸»è¦æŒ‰éˆ•è‰² */
            --button-secondary: #4a4a4a;                   /* æ¬¡è¦æŒ‰éˆ•è‰² */
            --button-orange: #ff9c33;                      /* æ©˜è‰²æŒ‰éˆ•ï¼ˆå…¼å®¹èˆŠä»£ç¢¼ï¼‰ */
            --button-blue: #33b5e5;                        /* è—è‰²æŒ‰éˆ•ï¼ˆå…¼å®¹èˆŠä»£ç¢¼ï¼‰ */
            --button-grey: #333333;                        /* ç°è‰²æŒ‰éˆ•ï¼ˆå…¼å®¹èˆŠä»£ç¢¼ï¼‰ */
            
            /* è¼¸å…¥æ¡†è‰²å½© */
            --input-bg: #222222;                           /* è¼¸å…¥æ¡†èƒŒæ™¯è‰² */
            --input-border: #555555;                       /* è¼¸å…¥æ¡†é‚Šæ¡†è‰² */
            --input-focus-border: #ff9c33;                 /* è¼¸å…¥æ¡†ç„¦é»é‚Šæ¡†è‰² */
            
            /* å…¶ä»–å…ƒä»¶è‰²å½© */
            --card-bg: #333333;                            /* å¡ç‰‡èƒŒæ™¯è‰² */
            --text-highlight: #ff9c33;                     /* æ–‡å­—å¼·èª¿è‰² */
            --helper-text-color: #999999;                  /* è¼”åŠ©æ–‡å­—é¡è‰² */
            --note-text-color: #e0e0e0;                    /* å‚™è¨»æ–‡å­—é¡è‰² */
            --note-text-empty: #888888;                    /* ç©ºå‚™è¨»æç¤ºæ–‡å­—é¡è‰² */
        }

        /* ============================================
        * 2. åŸºç¤å…ƒç´ æ¨£å¼
        * ============================================ */

        /* åŸºæœ¬é é¢æ¨£å¼ */
        html, body {
            width: 100%;                          /* ä½¿ç”¨100%å¯¬åº¦ */
            max-width: 400px;                     /* è¨­å®šæœ€å¤§å¯¬åº¦ */
            margin: 0 auto;                       /* å±…ä¸­é¡¯ç¤º */
            position: relative;                   /* ç›¸å°å®šä½ç”¨æ–¼å­å…ƒç´ çµ•å°å®šä½ */
            overflow-x: hidden;                   /* é˜²æ­¢æ°´å¹³æ»¾å‹• */
            -webkit-text-size-adjust: 100%;       /* ç¢ºä¿å­—é«”å¤§å°ä¸è‡ªå‹•èª¿æ•´ */
            padding: 0 3px;                       /* ç‚ºé é¢æ·»åŠ å·¦å³é–“è· */
            background-color: var(--primary-color); /* ä½¿ç”¨ä¸»é¡ŒèƒŒæ™¯è‰² */
            color: var(--text-color);             /* ä½¿ç”¨ä¸»é¡Œæ–‡å­—è‰² */
            font-family: "Microsoft JhengHei", Arial, sans-serif; /* è¨­å®šå­—é«” */
            box-sizing: border-box;               /* ç›’æ¨¡å‹è¨ˆç®—åŒ…å«é‚Šæ¡†å’Œå…§é‚Šè· */

            padding-top: 5px;                        /* èª¿æ•´é ‚éƒ¨é–“è·é©é…iframeé¡¯ç¤º */

        }

        /* é é¢æ¨™é¡Œæ¨£å¼ - å·²ç§»é™¤å‹•ç•«æ•ˆæœä»¥æå‡æ•ˆèƒ½ */
        h1 {
            color: var(--text-color);             /* ä½¿ç”¨ä¸»é¡Œæ–‡å­—è‰² */
            font-size: 22px;                      /* è¨­å®šå­—é«”å¤§å° */
            margin-bottom: 0px;                   /* ç§»é™¤åº•éƒ¨é‚Šè· */
            border-bottom: 2px solid var(--accent-color); /* åº•éƒ¨é‚Šæ¡† */
            padding: 0 24px 5px;                  /* æ·»åŠ å…§é‚Šè· */
            /* ç§»é™¤ position: relative å’Œ transition ä»¥æå‡æ•ˆèƒ½ */
        }

        /* æ¨™é¡Œå®¹å™¨ - æ·»åŠ ç¨ç«‹çš„z-indexç¢ºä¿æ­£ç¢ºçš„å±¤ç–Šé—œä¿‚ */
        /* iframeæ¨¡å¼ä¸‹éš±è—åŸheader - é¿å…èˆ‡ä¸»é é¢headeré‡è¤‡ */
        .header-container {
            display: none;                        /* éš±è—åŸæœ¬çš„header */
        }

        /* æ¨™é¡Œæ¨£å¼ - ç¢ºä¿æ‡¸åœæ•ˆæœä¸æœƒå½±éŸ¿æŒ‰éˆ• */
        h1 {
            color: var(--text-color);             /* ä½¿ç”¨ä¸»é¡Œæ–‡å­—è‰² */
            font-size: 22px;                      /* è¨­å®šå­—é«”å¤§å° */
            margin-bottom: 0px;                   /* ç§»é™¤åº•éƒ¨é‚Šè· */
            border-bottom: 2px solid var(--accent-color); /* åº•éƒ¨é‚Šæ¡† */
            padding-bottom: 5px;                  /* åº•éƒ¨å…§é‚Šè· */
            position: relative;                   /* ç›¸å°å®šä½ */
            z-index: 1;                           /* è¨­ç½®å±¤ç´š */
        }

        /* ç§»é™¤h1æ‡¸åœæ™‚çš„è®Šå½¢æ•ˆæœï¼Œé˜²æ­¢å½±éŸ¿æŒ‰éˆ• */
        h1:hover {
            text-shadow: 0 2px 4px rgba(255, 156, 51, 0.3);
        }

        /* æ¨™é¡Œä¸‹æ–¹æ©™è‰²ç·šæ¢æ•ˆæœ - å·²ç§»é™¤å‹•ç•«ä»¥æå‡æ•ˆèƒ½ */
        h1::after {
            display: none;
        }

        /* ç°¡åŒ–æ¨™é¡Œæ‡¸åœæ•ˆæœ - åªä¿ç•™æ–‡å­—é™°å½± */
        h1:hover {
            text-shadow: 0 2px 4px rgba(255, 156, 51, 0.3);
        }

        /* æ¨™é¡ŒæŒ‰éˆ•æ¨£å¼ */
        .header-btn {
            position: absolute;                   /* çµ•å°å®šä½ */
            top: 50%;                             /* å‚ç›´ç½®ä¸­ */
            transform: translateY(-50%);          /* ç²¾ç¢ºå‚ç›´ç½®ä¸­ */
            background-color: transparent;        /* é€æ˜èƒŒæ™¯ */
            color: #666666;                       /* è¨­ç½®æ–‡å­—é¡è‰² */
            border: none;                         /* ç§»é™¤é‚Šæ¡† */
            width: 20px;                          /* è¨­ç½®å¯¬åº¦ */
            height: 20px;                         /* è¨­ç½®é«˜åº¦ */
            font-size: 14px;                      /* è¨­ç½®å­—é«”å¤§å° */
            display: flex;                        /* ä½¿ç”¨flexä½ˆå±€ */
            align-items: center;                  /* å‚ç›´å±…ä¸­ */
            justify-content: center;              /* æ°´å¹³å±…ä¸­ */
            cursor: pointer;                      /* è¨­ç½®æ¸¸æ¨™æ¨£å¼ */
            z-index: 10;                          /* ç¢ºä¿æŒ‰éˆ•åœ¨æœ€ä¸Šå±¤ */
            padding: 0;                           /* ç§»é™¤å…§é‚Šè· */
            transition: color 0.2s ease;          /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            outline: none;                        /* ç§»é™¤é»æ“Šè¼ªå»“ */
            
            /* ç¦æ­¢æ‰€æœ‰è®Šå½¢å’Œå‹•ç•« */
            transform: translateY(-50%) !important; /* å¼·åˆ¶ä¿æŒå‚ç›´å±…ä¸­ */
            animation: none !important;            /* ç¦æ­¢å‹•ç•« */
            box-shadow: none !important;           /* ç¦æ­¢é™°å½± */
        }

        /* å¢åŠ æŒ‰éˆ•çš„å¯é»æ“Šå€åŸŸ */
        .header-btn::before {
            content: '';
            position: absolute;
            top: -15px;
            bottom: -15px;
            left: -15px;
            right: -15px;
        }

        /* æ¨™é¡ŒæŒ‰éˆ•æ‡¸åœæ•ˆæœ */
        .header-btn:hover {
            color: #999999;                       /* æ‡¸åœæ™‚æ”¹è®Šé¡è‰² */
            /* ç¦æ­¢ä»»ä½•ä½ç½®æˆ–å¤§å°è®ŠåŒ– */
            transform: translateY(-50%) !important; /* å¼·åˆ¶ä¿æŒå‚ç›´å±…ä¸­ */
        }

        /* æ¨™é¡ŒæŒ‰éˆ•é»æ“Šæ•ˆæœ */
        .header-btn:active {
            color: var(--button-orange);          /* é»æ“Šæ™‚è®Šç‚ºå¼·èª¿è‰² */
            /* ç¦æ­¢ä»»ä½•ä½ç½®æˆ–å¤§å°è®ŠåŒ– */
            transform: translateY(-50%) !important; /* å¼·åˆ¶ä¿æŒå‚ç›´å±…ä¸­ */
        }

        /* å·¦å³æŒ‰éˆ•ä½ç½® */
        .header-btn-left {
            left: 5px;                           /* å·¦é‚ŠæŒ‰éˆ•ä½ç½® */
        }

        .header-btn-right {
            right: 5px;                          /* å³é‚ŠæŒ‰éˆ•ä½ç½® */
        }

        /* å¢åŠ å·¦å³æŒ‰éˆ•çš„å¯é»æ“Šå€åŸŸä¸åŒç¨‹åº¦ */
        .header-btn-left::before {
            left: -20px;                         /* å·¦å´æ›´å¤§çš„å¯é»æ“Šå€åŸŸ */
        }

        .header-btn-right::before {
            right: -20px;                       /* å³å´æ›´å¤§çš„å¯é»æ“Šå€åŸŸ */
        }

        /* æ¸…é™¤å¯èƒ½å½±éŸ¿æŒ‰éˆ•çš„å…¶ä»–æ¨£å¼è¦å‰‡ */
        .header-btn * {
            transition: none !important;          /* ç¦æ­¢éæ¸¡æ•ˆæœ */
            animation: none !important;           /* ç¦æ­¢å‹•ç•« */
            transform: none !important;           /* ç¦æ­¢è®Šå½¢ */
        }

        /* é˜²æ­¢å…¨å±€æ‡¸åœæ•ˆæœå½±éŸ¿æŒ‰éˆ• */
        *:hover .header-btn {
            transform: translateY(-50%) !important; /* å¼·åˆ¶ä¿æŒå‚ç›´å±…ä¸­ */
            position: absolute !important;         /* å¼·åˆ¶ä¿æŒçµ•å°å®šä½ */
        }

        /* ============================================
        * 3. ä½ˆå±€èˆ‡å®¹å™¨
        * ============================================ */

        /* è¡Œå®¹å™¨æ¨£å¼ - å·²ç§»é™¤å‹•ç•«æ•ˆæœä»¥æå‡æ•ˆèƒ½ */
        .row {
            margin: 4px 0;                        /* ä¸Šä¸‹å¤–é‚Šè· */
            display: flex;                         /* å½ˆæ€§å¸ƒå±€ï¼Œè®“å­å…ƒç´ æ°´å¹³æ’åˆ— */
            align-items: center;                   /* å‚ç›´ç½®ä¸­å°é½Š */
            background: var(--secondary-color);   /* ä½¿ç”¨ä¸»é¡Œæ¬¡è¦èƒŒæ™¯è‰² */
            padding: 3px;                         /* å…§é‚Šè· */
            border-radius: 4px;                   /* åœ“è§’æ•ˆæœ */
            box-shadow: 0 4px 8px var(--shadow-color); /* é™°å½±æ•ˆæœ */
        }

        /* ============================================
        * å¯ç·¨è¼¯æ¬„ä½è¨­è¨ˆ - å·²ç°¡åŒ–ç§»é™¤å‹•ç•«
        * ============================================ */

        /* å¯ç·¨è¼¯æ¬„ä½çš„ç°¡åŒ–è¨­è¨ˆ - ç§»é™¤æ‰€æœ‰å‹•ç•«æ•ˆæœ */
        .editable-field {
            border-left: 3px solid var(--accent-color);  /* å·¦å´é‚Šæ¡†æ¨™è¨˜ */
            background: rgba(var(--accent-color-rgb), 0.02); /* æ¥µæ·¡çš„èƒŒæ™¯è‰² */
        }

        /* ç°¡åŒ–èšç„¦æ•ˆæœ */
        .editable-field:focus-within {
            border-left-width: 4px; /* ç¨å¾®åŠ å¯¬é‚Šæ¡† */
        }

        /* ç¢ºä¿å…§éƒ¨å…ƒç´ ä¿æŒæ­£å¸¸çš„å®šä½å’Œé¡¯ç¤º */
        .editable-field .label,
        .editable-field input,
        .editable-field button,
        .editable-field .helper-text {
            position: relative;                                    /* ç›¸å°å®šä½ */
            z-index: 1;                                           /* ç¢ºä¿åœ¨èƒŒæ™¯æ•ˆæœä¹‹ä¸Š */
        }

        /* ============================================
        * éŸ¿æ‡‰å¼è¨­è¨ˆå„ªåŒ–
        * ============================================ */

        /* åœ¨è¼ƒå°çš„è¢å¹•ä¸Šæ¸›å°‘å‹•ç•«æ•ˆæœï¼Œæå‡æ€§èƒ½ */
        @media (max-width: 480px) {
            .editable-field {
                transition: border-left-width 0.2s ease,          /* åªä¿ç•™é‚Šæ¡†è®ŠåŒ–å‹•ç•« */
                            background-color 0.2s ease;           /* å’ŒèƒŒæ™¯è‰²è®ŠåŒ–å‹•ç•« */
            }
            
            .editable-field:hover,
            .editable-field:focus-within {
                transform: none;                                   /* åœ¨å°è¢å¹•ä¸Šç§»é™¤ä½ç§»æ•ˆæœ */
            }
        }

        /* é‡å°è§¸æ§è¨­å‚™çš„å„ªåŒ– */
        @media (hover: none) and (pointer: coarse) {
            .editable-field:hover {
                /* åœ¨è§¸æ§è¨­å‚™ä¸Šç§»é™¤æ‡¸åœæ•ˆæœï¼Œå› ç‚ºè§¸æ§è¨­å‚™æ²’æœ‰çœŸæ­£çš„æ‡¸åœç‹€æ…‹ */
                border-left-width: 3px;
                background: linear-gradient(135deg,                
                    rgba(var(--accent-color-rgb), 0.03) 0%,       
                    rgba(var(--accent-color-rgb), 0.01) 100%);
                box-shadow: none;
                transform: none;
            }
        }

        /* æ¨™ç±¤æ¨£å¼ */
        .label {
            width: 120px;                        /* å›ºå®šå¯¬åº¦ */
            margin-right: 8px;                   /* å³å´é‚Šè· - å¾15pxæ¸›å°‘åˆ°8pxè®“æ¨™ç±¤æ›´é è¿‘è¼¸å…¥æ¡† */
            text-align: right;                   /* æ–‡å­—å³å°é½Š */
            font-weight: normal;                 /* å­—é«”ç²—ç´° - æ”¹ç‚ºæ­£å¸¸ç²—ç´°ï¼ˆä¸æ˜¯ç²—é«”ï¼‰ */
            color: var(--text-color);            /* æ–‡å­—é¡è‰² */
            position: relative;                  /* ç›¸å°å®šä½ */
            overflow: hidden;                    /* éš±è—æº¢å‡ºå…§å®¹ */
            font-size: var(--label-font-size);   /* ä½¿ç”¨è®Šæ•¸æ§åˆ¶å­—é«”å¤§å° */
        }

        /* è¼¸å…¥æ¡†èˆ‡æŒ‰éµçš„è¦–è¦ºåˆ†çµ„ */
        .input-button-group {
            border: 1px solid var(--border-color); /* æ·»åŠ é‚Šæ¡† */
            border-radius: 8px;                    /* åœ“è§’ */
            margin: 4px 0;                         /* ä¸Šä¸‹é‚Šè· */
            padding: 1px;                          /* å…§é‚Šè· */
            background: var(--secondary-color);    /* ä½¿ç”¨æ¬¡èƒŒæ™¯è‰² */
            box-shadow: 0 4px 8px var(--shadow-color); /* é™°å½±æ•ˆæœ */
            position: relative;                     /* ç›¸å°å®šä½ */
            overflow: hidden;                       /* éš±è—æº¢å‡ºå…§å®¹ */
            transition: all 0.3s ease-in-out;       /* éæ¸¡æ•ˆæœ */
        }

        /* åˆ†çµ„å…§çš„è¡Œå®¹å™¨ */
        .input-button-group .row {
            background: transparent;              /* é€æ˜èƒŒæ™¯ */
            box-shadow: none;                     /* ç§»é™¤é™°å½± */
            margin: 2px 0;                        /* ä¸Šä¸‹é‚Šè· */
            padding-top: 1px;                     /* ä¸Šéƒ¨å…§é‚Šè· */
            padding-bottom: 1px;                  /* ä¸‹éƒ¨å…§é‚Šè· */
        }

        /* æŒ‰éµå®¹å™¨æ¨£å¼èª¿æ•´ - å·²ç§»é™¤å‹•ç•«æ•ˆæœ */
        .input-button-group div[id$="Buttons"] {
            margin: 0;
            padding-top: 0;
            padding-bottom: 2px;
            border-top: none;
            /* ç¢ºä¿æ²’æœ‰ transition å±¬æ€§ */
            max-height: 100px;
            opacity: 1;
        }
        
        /* ç•¶æ»‘é¼ æ‡¸åœåœ¨æŒ‰éµçµ„ä¸Šæ™‚çš„æ•ˆæœ */
        .input-button-group div[id$="Buttons"]:hover {
            background-color: rgba(255, 156, 51, 0.05); /* æ·»åŠ æ·¡æ©™è‰²èƒŒæ™¯ */
            border-radius: 4px;                          /* åœ“è§’ */
        }

        /* éš±è—ç‹€æ…‹çš„æŒ‰éˆ•çµ„ */
        .input-button-group div[id$="Buttons"] {
            max-height: 0;                         /* é«˜åº¦ç‚º0 */
            opacity: 0;                            /* å®Œå…¨é€æ˜ */
            padding: 0;                            /* ç§»é™¤å…§é‚Šè· */
            margin: 0;                             /* ç§»é™¤é‚Šè· */
            overflow: hidden;                      /* éš±è—æº¢å‡ºå…§å®¹ */
        }

        /* æ™‚é–“é¡¯ç¤ºåŒ…è£å®¹å™¨ */
        .time-display-wrapper {
            position: relative;                    /* ç›¸å°å®šä½ */
            height: auto;                          /* è‡ªå‹•é«˜åº¦ */
            margin: 3px 0;                         /* ä¸Šä¸‹é‚Šè· */
            z-index: 1000;                         /* å±¤ç´š */
            margin-top: 10px;                      /* å¢åŠ é ‚éƒ¨é‚Šè· */
        }

        /* å›ºå®šé ‚éƒ¨çš„æ™‚é–“é¡¯ç¤º */
        .sticky-header {
            position: -webkit-sticky !important;   /* Safariæ”¯æŒ */
            position: sticky !important;           /* é»æ€§å®šä½ */
            top: 0;                                /* è²¼é½Šé ‚éƒ¨ */
            background: var(--secondary-color);    /* ä½¿ç”¨æ¬¡èƒŒæ™¯è‰² */
            padding: 8px;                          /* å…§é‚Šè· */
            border-radius: 4px;                    /* åœ“è§’ */
            box-shadow: 0 2px 4px var(--shadow-color); /* é™°å½±æ•ˆæœ */
            animation: fadeIn 0.8s ease-out;       /* æ·¡å…¥å‹•ç•« */
            transition: all 0.3s ease;             /* éæ¸¡æ•ˆæœ */
            z-index: 999;                          /* å±¤ç´š */
            width: calc(100% - 16px);              /* å¯¬åº¦è€ƒæ…®å…§é‚Šè· */
            margin: 0 auto;                        /* å±…ä¸­ */
        }

        /* å›ºå®šç‹€æ…‹çš„æ¨£å¼ */
        .sticky-header.is-sticky {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* å¢å¼·é™°å½± */
            border-radius: 0 0 4px 4px;              /* åªä¿ç•™åº•éƒ¨åœ“è§’ */
            transform: translateY(0);                 /* é‡ç½®Yè»¸ä½ç½® */
        }

        /* æ™‚é–“é¡¯ç¤ºæ¨£å¼ */
        #timeDisplay {
            margin: 3px 0;                          /* ä¸Šä¸‹é‚Šè· */
            font-size: 15px;                        /* å­—é«”å¤§å° */
            background: var(--secondary-color);     /* èƒŒæ™¯è‰² */
            color: var(--text-color);               /* æ–‡å­—é¡è‰² */
            padding: 8px;                           /* å…§é‚Šè· */
            border-radius: 4px;                     /* åœ“è§’ */
            box-shadow: 0 2px 4px var(--shadow-color); /* é™°å½± */
            animation: fadeIn 0.8s ease-out;        /* æ·¡å…¥å‹•ç•« */
            transition: all 0.3s ease;              /* éæ¸¡æ•ˆæœ */
            position: relative;                     /* ç›¸å°å®šä½ */
            overflow: hidden;                       /* éš±è—æº¢å‡ºå…§å®¹ */
        }

        /* æ™‚é–“é¡¯ç¤ºé ‚éƒ¨ç·šæ¢å‹•ç•« */
        #timeDisplay::before {
            content: '';                           /* å‰µå»ºç©ºå…§å®¹ */
            position: absolute;                    /* çµ•å°å®šä½ */
            top: 0;                                /* è²¼é½Šé ‚éƒ¨ */
            left: -100%;                           /* åˆå§‹ä½ç½®åœ¨å·¦å¤–å´ */
            width: 100%;                           /* å¯¬åº¦100% */
            height: 2px;                           /* é«˜åº¦2px */
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent); /* æ¼¸è®ŠèƒŒæ™¯ */
            animation: timelineSlide 3s linear infinite; /* æ»‘å‹•å‹•ç•« */
        }

        /* æ™‚é–“ç·šæ»‘å‹•å‹•ç•« */
        @keyframes timelineSlide {
            0% { left: -100%; }                   /* é–‹å§‹æ™‚åœ¨å·¦å¤–å´ */
            100% { left: 100%; }                  /* çµæŸæ™‚åœ¨å³å¤–å´ */
        }

        /* æ™‚é–“æ¨™ç±¤æ¨£å¼ */
        .time-label {
            font-weight: normal;                     /* ç²—é«” */
            margin-right: 8px;                    /* å³å´é‚Šè· */
            color: var(--accent-color);            /* ä½¿ç”¨å¼·èª¿è‰² */
        }

        /* 1. æµå…‰åˆ†éš”ç·š */
        .divider-flow {
            position: relative;                    /* ç›¸å°å®šä½ */
            height: 2px;                           /* é«˜åº¦2px */
            background: linear-gradient(90deg, 
                var(--secondary-color) 0%,
                var(--accent-color) 50%,
                var(--secondary-color) 100%);      /* æ¼¸è®ŠèƒŒæ™¯ */
            margin: 4px 0;                         /* ä¸Šä¸‹é‚Šè· */
            overflow: hidden;                      /* éš±è—æº¢å‡ºå…§å®¹ */
            animation: dividerFadeIn 0.5s ease-out; /* æ·¡å…¥å‹•ç•« */
        }

        /* åˆ†éš”ç·šæµå…‰æ•ˆæœ */
        .divider-flow::after {
            content: '';                           /* å‰µå»ºç©ºå…§å®¹ */
            position: absolute;                    /* çµ•å°å®šä½ */
            top: 0;                                /* è²¼é½Šé ‚éƒ¨ */
            left: -100%;                           /* åˆå§‹ä½ç½®åœ¨å·¦å¤–å´ */
            width: 100%;                           /* å¯¬åº¦100% */
            height: 100%;                          /* é«˜åº¦100% */
            background: linear-gradient(90deg,
                transparent,
                var(--accent-color),
                transparent);                      /* æ¼¸è®ŠèƒŒæ™¯ */
            animation: flowLight 3s ease-in-out infinite; /* æµå…‰å‹•ç•« */
        }

        /* æµå…‰å‹•ç•« */
        @keyframes flowLight {
            0% { transform: translateX(0); }       /* é–‹å§‹ä½ç½® */
            100% { transform: translateX(200%); }  /* çµæŸä½ç½® */
        }

        /* åˆ†éš”ç·šæ·¡å…¥å‹•ç•« */
        @keyframes dividerFadeIn {
            from {
                opacity: 0;                        /* é–‹å§‹æ™‚é€æ˜ */
                transform: scaleX(0.8);            /* é–‹å§‹æ™‚å¯¬åº¦ç‚º80% */
            }
            to {
                opacity: 1;                        /* çµæŸæ™‚ä¸é€æ˜ */
                transform: scaleX(1);              /* çµæŸæ™‚å¯¬åº¦ç‚º100% */
            }
        }

        /* è¼”åŠ©èªªæ˜æ–‡å­—æ¨£å¼ - ç”¨æ–¼æ¬„ä½å³å´çš„èªªæ˜æ–‡å­— */
        .helper-text {
            margin-left: 0px;                    /* å·¦å´é‚Šè· */
            color: var(--helper-text-color);     /* ä½¿ç”¨è®Šæ•¸æ§åˆ¶æ–‡å­—é¡è‰² */
            font-size: 16px;                     /* ä¿æŒåŸå§‹å­—é«”å¤§å° */
        }

        /* å¼·èª¿é‡è¦æ¬„ä½ */
        .emphasized-row {
            border-left: 3px solid var(--accent-color); /* å·¦å´é‚Šæ¡† */
            background: linear-gradient(90deg, var(--accent-color-light), transparent); /* æ¼¸è®ŠèƒŒæ™¯ */
            transform: scale(1.01);                /* ç¨å¾®æ”¾å¤§ */
            transition: all 0.3s ease;             /* éæ¸¡æ•ˆæœ */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* é™°å½±æ•ˆæœ */
        }

        /* å¼·èª¿æ¬„ä½æ¨™ç±¤ */
        .emphasized-row .label {
            color: var(--accent-color);           /* ä½¿ç”¨å¼·èª¿è‰² */
            font-weight: 700;                     /* ç²—é«” */
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); /* æ–‡å­—é™°å½± */
        }

        /* å¼·èª¿æ¬„ä½è¼¸å…¥æ¡† */
        .emphasized-row input {
            font-weight: bold;                    /* ç²—é«” */
            color: #ffffff;                       /* ç™½è‰²æ–‡å­— */
            font-size: 17px;                      /* å­—é«”å¤§å° */
            border-color: var(--accent-color);    /* ä½¿ç”¨å¼·èª¿è‰²é‚Šæ¡† */
        }

        /* å¼·èª¿æ¬„ä½æ‡¸åœæ•ˆæœ - ç§»é™¤å³ç§»æ•ˆæœ */
        .emphasized-row:hover {
            transform: scale(1.02); /* åªä¿ç•™æ”¾å¤§æ•ˆæœï¼Œç§»é™¤å³ç§» */
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.25); /* å¢å¼·é™°å½± */
        }

        /* ç¢ºä¿è¡Œèˆ‡è¡Œä¹‹é–“çš„é–“è·ä¸€è‡´ */
        .row + .row {
            margin-top: 4px;              /* çµ±ä¸€è¡Œèˆ‡è¡Œä¹‹é–“çš„é–“è· */
        }

        /* é è…³è¨Šæ¯ */
        .footer-message {
            background-color: var(--primary-color); /* ä½¿ç”¨ä¸»èƒŒæ™¯è‰² */
            color: var(--text-color);              /* ä½¿ç”¨æ–‡å­—è‰² */
            padding: 15px;                         /* å…§é‚Šè· */
            text-align: center;                    /* æ–‡å­—å±…ä¸­ */
            margin-top: 15px;                      /* é ‚éƒ¨é‚Šè· */
            border-radius: 4px;                    /* åœ“è§’ */
            transform: scale(1.05);                /* ç¨å¾®æ”¾å¤§ */
            text-shadow: 0 0 10px var(--accent-color); /* æ–‡å­—é™°å½± */
            transition: all 0.3s ease;              /* éæ¸¡æ•ˆæœ */
            position: relative;                     /* ç›¸å°å®šä½ */
        }

        /* é è…³è¨Šæ¯å‰çš„emoji */
        .footer-message::before {
            content: 'ğŸš';                         /* é¡¯ç¤ºé£¯emoji */
            margin-right: 8px;                     /* å³å´é‚Šè· */
            display: inline-block;                 /* è¡Œå…§å¡Šé¡¯ç¤º */
            transition: transform 0.3s ease;        /* éæ¸¡æ•ˆæœ */
        }

        /* é è…³è¨Šæ¯æ‡¸åœæ™‚emojiæ—‹è½‰æ•ˆæœ */
        .footer-message:hover::before {
            transform: rotate(360deg);             /* æ—‹è½‰360åº¦ */
        }

        /* é è…³é–“è· */
        .footer-spacing {
            background-color: var(--primary-color); /* ä½¿ç”¨ä¸»èƒŒæ™¯è‰² */
            height: 50px;                          /* é«˜åº¦ */
            margin-top: 0px;                       /* é ‚éƒ¨é‚Šè· */
        }

        /* ============================================
        * 4. è¼¸å…¥å…ƒç´ èˆ‡è¡¨å–®
        * ============================================ */

        /* è¼¸å…¥æ¡†åŸºæœ¬æ¨£å¼ - å·²ç§»é™¤å‹•ç•«æ•ˆæœä»¥æå‡æ•ˆèƒ½ */
        input {
            width: 95px;                           /* å›ºå®šå¯¬åº¦ */
            padding: 5px var(--input-padding-lr);  /* å…§é‚Šè· - ä½¿ç”¨è®Šæ•¸æ§åˆ¶å·¦å³é–“è· */
            margin-right: 10px;                    /* å³å´é‚Šè· */
            background-color: var(--input-bg);     /* ä½¿ç”¨ä¸»é¡Œè¼¸å…¥æ¡†èƒŒæ™¯è‰² */
            color: var(--text-color);              /* ä½¿ç”¨ä¸»é¡Œæ–‡å­—è‰² */
            border: 1px solid var(--border-color); /* é‚Šæ¡† */
            border-radius: 4px;                    /* åœ“è§’ */
            font-size: var(--input-font-size);     /* ä½¿ç”¨è®Šæ•¸æ§åˆ¶å­—é«”å¤§å° */
            text-align: right;                     /* æ–‡å­—é å³å°é½Š */
        }

        /* è¼¸å…¥æ¡†èšç„¦æ•ˆæœ - å·²ç§»é™¤å‹•ç•«ä»¥æå‡æ•ˆèƒ½ */
        input:focus {
            outline: none;                         /* ç§»é™¤é è¨­ç„¦é»å¤–æ¡† */
            border-color: var(--accent-color);     /* ä½¿ç”¨å¼·èª¿è‰²é‚Šæ¡† */
            box-shadow: 0 0 0 2px var(--accent-color-light); /* æ·»åŠ äº®è‰²é‚Šæ¡†ï¼ˆæ¸›å°‘æ¨¡ç³ŠåŠå¾‘ï¼‰ */
        }

        /* åªè®€è¼¸å…¥æ¡†æ¨£å¼ */
        .readonly {
            background-color: var(--input-bg);     /* ä½¿ç”¨ä¸»é¡Œè¼¸å…¥æ¡†èƒŒæ™¯è‰² */
        }

        /* è­¦å‘Šæ–‡å­—æ¨£å¼ */
        .warning-text {
            color: var(--error-color) !important;    /* ä½¿ç”¨éŒ¯èª¤è‰² */
            font-weight: bold !important;            /* ç²—é«” */
            animation: pulse 1s infinite, shake 0.5s ease-in-out; /* è„ˆå‹•å’Œéœ‡å‹•å‹•ç•« */
            will-change: transform;                  /* å„ªåŒ–æ¸²æŸ“æ€§èƒ½ */
        }

        /* éœ‡å‹•å‹•ç•« */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }   /* é–‹å§‹å’ŒçµæŸä½ç½® */
            20%, 60% { transform: translateX(-1px); } /* å‘å·¦ç§»å‹• */
            40%, 80% { transform: translateX(1px); }  /* å‘å³ç§»å‹• */
        }

        /* è„ˆå‹•å‹•ç•« - å®šç¾©å…ƒç´ çš„é€æ˜åº¦å’Œç¸®æ”¾è®ŠåŒ– */
        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }   /* é–‹å§‹å’ŒçµæŸç‹€æ…‹ï¼šè¼•å¾®é€æ˜å’ŒåŸå§‹å¤§å° */
            50% { opacity: 1; transform: scale(1.1); }        /* ä¸­é–“ç‹€æ…‹ï¼šå®Œå…¨ä¸é€æ˜å’Œæ”¾å¤§10% */
        }

        /* æŒ‰éˆ•åŸºæœ¬æ¨£å¼ - ç°¡åŒ–ç‰ˆæœ¬ */
        button {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 3px 8px;
            margin: 0 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        /* æŒ‰éˆ•æ‡¸åœæ•ˆæœ - ç°¡åŒ–ç‰ˆæœ¬ */
        button:hover {
            background-color: var(--hover-color);
        }

        /* æŒ‰éˆ•é»æ“Šæ•ˆæœ - ç°¡åŒ–ç‰ˆæœ¬ */
        button:active {
            background-color: var(--secondary-color); /* åªæ”¹è®Šé¡è‰² */
        }

        /* è¡Œå®¹å™¨ä¸­çš„æŒ‰éˆ•æ¨£å¼ - èª¿æ•´åœ¨è¡Œå®¹å™¨å…§çš„æŒ‰éˆ•å¤–è§€ */
        .row button {
            background-color: var(--secondary-color);   /* ä½¿ç”¨æ¬¡è¦èƒŒæ™¯è‰² */
            color: #888888;                            /* ä½¿ç”¨æš—ç°è‰²æ–‡å­— */
            border: 1px solid #444444;                /* æ·±è‰²é‚Šæ¡† */
            padding: 3px 8px;                         /* å…§éƒ¨é–“è· */
            margin: 0 5px;                            /* å·¦å³å¤–éƒ¨é–“è· */
            border-radius: 4px;                       /* åœ“è§’æ•ˆæœ */
            cursor: pointer;                          /* æ»‘é¼ æŒ‡æ¨™è®Šç‚ºæ‰‹å‹ */
            transition: all 0.3s ease;                /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            font-size: 15px;                          /* æ–‡å­—å¤§å° */
            opacity: 0.8;                             /* è¼•å¾®é€æ˜æ•ˆæœ */
        }

        /* ç‰¹å®šæŒ‰éˆ•çµ„å…§æŒ‰éˆ•çš„æ¨£å¼ - çµ±ä¸€å„ç¨®é¡å‹æŒ‰éˆ•çš„é¡¯ç¤º */
        #periodButtons button, 
        #rateButtons button, 
        #principalButtons button, 
        #commissionButtons button, 
        #PaymentduringButtons button,
        #commissionPercentButtons button {
            min-width: 50px;       /* æœ€å°å¯¬åº¦ */
            text-align: center;    /* æ–‡å­—å±…ä¸­ */
            flex: 1;               /* å¹³å‡åˆ†é…ç©ºé–“ */
            max-width: 80px;       /* æœ€å¤§å¯¬åº¦é™åˆ¶ */
            margin: 0 2px;         /* å·¦å³å¤–éƒ¨é–“è· */
            height: 28px;          /* å›ºå®šé«˜åº¦ */
            padding: 0 5px;        /* å…§éƒ¨é–“è· */
            display: flex;         /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            align-items: center;   /* å‚ç›´å±…ä¸­ */
            justify-content: center; /* æ°´å¹³å±…ä¸­ */
            white-space: nowrap;   /* é˜²æ­¢æ–‡å­—æ›è¡Œ */
            overflow: hidden;      /* éš±è—æº¢å‡ºå…§å®¹ */
            text-overflow: ellipsis; /* æ–‡å­—æº¢å‡ºæ™‚é¡¯ç¤ºçœç•¥è™Ÿ */
        }

        /* é‡å°æŒ‰éˆ•æ•¸é‡å¤šçš„å…©å€‹çµ„åˆ¥é€²è¡Œç‰¹æ®Šèª¿æ•´ - ç¢ºä¿å¸ƒå±€ç¾è§€ */
        #periodButtons button, 
        #rateButtons button {
            min-width: 30px;      /* é€²ä¸€æ­¥æ¸›å°æœ€å°å¯¬åº¦ï¼Œå› ç‚ºç¨…å‰åˆ©ç‡ç¾åœ¨æœ‰8å€‹æŒ‰éµ */
            max-width: 45px;      /* é€²ä¸€æ­¥æ¸›å°æœ€å¤§å¯¬åº¦ï¼Œç¢ºä¿8å€‹æŒ‰éµèƒ½æ’æˆä¸€åˆ— */
            padding: 0 2px;       /* é€²ä¸€æ­¥æ¸›å°å…§éƒ¨é–“è· */
            font-size: 14px;      /* ç¨å¾®æ¸›å°å­—é«”å¤§å°ï¼Œè®“æŒ‰éµæ›´ç·Šæ¹Š */
        }

        /* æ¸›å°é€™å…©å€‹æŒ‰éˆ•çµ„çš„æŒ‰éˆ•é–“è· - ä½¿æ›´å¤šæŒ‰éˆ•èƒ½é©æ‡‰å¯¬åº¦ */
        #periodButtons, 
        #rateButtons {
            gap: 2px;             /* æ¸›å°æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
        }

        /* è¡Œå®¹å™¨ä¸­æŒ‰éˆ•çš„æ‡¸åœæ•ˆæœ - æä¾›è¦–è¦ºåé¥‹ */
        .row button:hover {
            background-color: #4a4a4a; /* ç¨å¾®äº®ä¸€é»çš„ç°è‰² */
            color: #cccccc;           /* äº®ä¸€é»çš„æ–‡å­—é¡è‰² */
            border-color: #555555;    /* äº®ä¸€é»çš„é‚Šæ¡†é¡è‰² */
            opacity: 0.9;             /* æé«˜ä¸é€æ˜åº¦ */
        }

        /* è¡Œå®¹å™¨ä¸­æŒ‰éˆ•çš„é»æ“Šæ•ˆæœ - é»æ“Šæ™‚çš„è¦–è¦ºåé¥‹ */
        .row button:active {
            background-color: var(--secondary-color);  /* æ¢å¾©åŸæœ¬èƒŒæ™¯é¡è‰² */
            color: var(--text-color);                 /* æ¢å¾©åŸæœ¬æ–‡å­—é¡è‰² */
            border-color: var(--button-grey);         /* ä½¿ç”¨ç°è‰²æŒ‰éˆ•é‚Šæ¡† */
        }

        /* å°‡çµ„å…§çš„æŒ‰éµè¼•å¾®çªå‡ºé¡¯ç¤º - å¢åŠ è¦–è¦ºå±¤æ¬¡æ„Ÿ */
        .input-button-group div[id$="Buttons"] button {
            position: relative;                    /* ç›¸å°å®šä½ */
            z-index: 2;                           /* æé«˜å±¤ç´š */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15); /* è¼•å¾®é™°å½± */
        }

        /* æ”¹é€²æŒ‰éµé»æ“Šåé¥‹ - æä¾›æ›´æ˜é¡¯çš„é»æ“Šè¦–è¦ºæ•ˆæœ */
        .input-button-group div[id$="Buttons"] button:active {
            transform: scale(0.95);               /* ç¸®å°æ•ˆæœ */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); /* æ¸›å°é™°å½± */
            transition: transform 0.1s, box-shadow 0.1s; /* å¿«é€Ÿéæ¸¡æ•ˆæœ */
        }

        /* æ·»åŠ è¼•å¾®çš„æ‡¸åœæ•ˆæœ - é¼ æ¨™æ‡¸åœæ™‚çš„é‚Šæ¡†è®ŠåŒ– */
        .input-button-group div[id$="Buttons"] button:hover {
            border-color: var(--button-orange);   /* ä½¿ç”¨æ©™è‰²é‚Šæ¡† */
        }

        /* ç‰¹å®šIDçµå°¾çš„æŒ‰éˆ•çµ„æ¨£å¼ - ç‚ºé€™äº›æŒ‰éˆ•çµ„è¨­ç½®çµ±ä¸€æ¨£å¼ */
        div[id$="Buttons"] button {
            background-color: var(--secondary-color); /* ä½¿ç”¨æ¬¡è¦èƒŒæ™¯è‰² */
            color: #bcbcbc;                         /* äº®ç°è‰²æ–‡å­— */
            border: 1px solid var(--button-orange);  /* ä½¿ç”¨æ©™è‰²å¤–æ¡† */
            padding: 4px 9px;                       /* å…§éƒ¨é–“è· */
            margin: 0 4px;                          /* å·¦å³å¤–éƒ¨é–“è· */
            border-radius: 4px;                     /* åœ“è§’æ•ˆæœ */
            cursor: pointer;                        /* æ»‘é¼ æŒ‡æ¨™è®Šç‚ºæ‰‹å‹ */
            transition: all 0.3s ease;              /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            font-size: 15px;                        /* æ–‡å­—å¤§å° */
            opacity: 0.95;                          /* è¼ƒé«˜ä¸é€æ˜åº¦ */
        }

        /* ç‰¹å®šIDçµå°¾çš„æŒ‰éˆ•çµ„æ‡¸åœæ•ˆæœ - é¼ æ¨™æ‡¸åœæ™‚çš„è¦–è¦ºè®ŠåŒ– */
        div[id$="Buttons"] button:hover {
            background-color: rgba(255, 156, 51, 0.15); /* æ·¡æ©˜è‰²èƒŒæ™¯ */
            color: #ffffff;                           /* ç™½è‰²æ–‡å­— */
            border-color: var(--button-orange);       /* æ©™è‰²é‚Šæ¡† */
            transform: translateY(-1px);              /* è¼•å¾®ä¸Šç§» */
            box-shadow: 0 2px 4px rgba(255, 156, 51, 0.2); /* æ©™è‰²é™°å½± */
        }

        /* ç‰¹å®šIDçµå°¾çš„æŒ‰éˆ•çµ„é»æ“Šæ•ˆæœ - é»æ“Šæ™‚çš„è¦–è¦ºåé¥‹ */
        div[id$="Buttons"] button:active {
            transform: translateY(1px);              /* è¼•å¾®ä¸‹ç§» */
            background-color: rgba(255, 156, 51, 0.3); /* è¼ƒæ·±æ©™è‰²èƒŒæ™¯ */
            box-shadow: 0 0 5px rgba(255, 156, 51, 0.5) inset; /* å…§é™°å½±æ•ˆæœ */
            transition: all 0.1s ease;               /* å¿«é€Ÿéæ¸¡æ•ˆæœ */
        }

        /* æ·»åŠ æ»šåŠ¨æ—¶çš„æ•ˆæœ - é ­éƒ¨å›ºå®šå€åŸŸæ¨£å¼ */
        .sticky-header.is-sticky {
            border-radius: 0 0 4px 4px;              /* åº•éƒ¨åœ“è§’ */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* å¢å¼·é™°å½± */
            transform: translateY(0);                /* é‡ç½®Yè»¸ä½ç½® */
        }

        /* å„ç¨®æŒ‰éˆ•çµ„çš„å¸ƒå±€ - å‰µå»ºå½ˆæ€§å¸ƒå±€å®¹å™¨ */
        #periodButtons, #rateButtons, #principalButtons, #commissionButtons, #PaymentduringButtons, #commissionPercentButtons {
            margin: 0;                              /* ç§»é™¤å¤–éƒ¨é–“è· */
            display: flex;                          /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            flex-wrap: wrap;                        /* å…è¨±æ›è¡Œ */
            gap: 3px;                               /* é …ç›®é–“è· */
            width: 100%;                            /* å æ»¿å®¹å™¨å¯¬åº¦ */
            justify-content: center;                /* æ°´å¹³å±…ä¸­ */
            padding: 0 5px;                         /* å·¦å³å…§éƒ¨é–“è· */
            box-sizing: border-box;                 /* ç›’æ¨¡å‹è¨ˆç®—æ–¹å¼ */
            min-height: 32px;                       /* æœ€å°é«˜åº¦ */
            align-items: center;                    /* å‚ç›´å±…ä¸­ */
        }

        /* æŒ‰éˆ•åŸºæœ¬ç‰¹æ€§ - é˜²æ­¢æŒ‰éˆ•åœ¨å½ˆæ€§å¸ƒå±€ä¸­è¢«æ‹‰ä¼¸ */
        button {
            flex-shrink: 0;                         /* ç¦æ­¢æŒ‰éˆ•ç¸®å° */
        }

        /* æ–°çš„æŒ‰éˆ•çµ„æ¨£å¼ - åŠŸèƒ½æŒ‰éˆ•çµ„çš„å®¹å™¨ */
        .function-buttons {
            display: flex;                          /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            flex-direction: column;                 /* å‚ç›´æ’åˆ— */
            gap: 4px;                               /* é …ç›®é–“è· */
            margin: 4px 0;                          /* ä¸Šä¸‹å¤–éƒ¨é–“è· */
            padding: 0;                             /* ç§»é™¤å…§éƒ¨é–“è· */
            width: 100%;                            /* å æ»¿å®¹å™¨å¯¬åº¦ */
        }

        /* åŠŸèƒ½æŒ‰éˆ•è¡Œå®¹å™¨ - æ°´å¹³æ’åˆ—çš„æŒ‰éˆ• */
        .function-buttons .button-row {
            display: flex;                          /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            justify-content: space-between;         /* å…©ç«¯å°é½Š */
            gap: 4px;                               /* æ¸›å°æŒ‰éˆ•é–“è· */
            width: 100%;                            /* å æ»¿å®¹å™¨å¯¬åº¦ */
        }

        /* èª¿æ•´é ‚éƒ¨æŒ‰éˆ•çµ„ - é ‚éƒ¨åŠŸèƒ½æŒ‰éˆ•çš„å¸ƒå±€ */
        .top-buttons .button-row button {
            flex: 1;                                /* å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 0;                           /* å…è¨±æŒ‰éˆ•è®Šçª„ */
        }

        /* èª¿æ•´åº•éƒ¨æŒ‰éˆ•çµ„ - åº•éƒ¨åŠŸèƒ½æŒ‰éˆ•çš„å¸ƒå±€ */
        .bottom-buttons .button-row button {
            flex: 1;                                /* å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 0;                           /* å…è¨±æŒ‰éˆ•è®Šçª„ */
        }

        /* åŠŸèƒ½æŒ‰éˆ•ä¸Šä¸‹è¡Œæ¨£å¼ - ç¢ºä¿çµ±ä¸€å¸ƒå±€ */
        .function-buttons .top-row,
        .function-buttons .bottom-row {
            display: flex;                          /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            justify-content: space-between;         /* å…©ç«¯å°é½Š */
            gap: 10px;                              /* é …ç›®é–“è· */
        }

        /* é ‚éƒ¨è¡ŒæŒ‰éˆ•æ¨£å¼ - ç¢ºä¿æŒ‰éˆ•å¹³å‡åˆ†å¸ƒ */
        .function-buttons .top-row button {
            flex: 1;                                /* å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 0;                           /* å…è¨±æŒ‰éˆ•è®Šçª„ */
            margin: 0;                              /* ç§»é™¤å¤–éƒ¨é–“è· */
        }

        /* åº•éƒ¨è¡ŒæŒ‰éˆ•æ¨£å¼ - ç¢ºä¿æŒ‰éˆ•å¹³å‡åˆ†å¸ƒ */
        .function-buttons .bottom-row button {
            flex: 1;                                /* å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 0;                           /* å…è¨±æŒ‰éˆ•è®Šçª„ */
            margin: 0;                              /* ç§»é™¤å¤–éƒ¨é–“è· */
        }

        /* çµ±ä¸€æ‰€æœ‰åŠŸèƒ½æŒ‰éˆ•çš„åŸºç¤æ¨£å¼ - å‰µå»ºè¦–è¦ºä¸€è‡´çš„æŒ‰éˆ• */
        .function-buttons button {
            background-color: var(--secondary-color); /* ä½¿ç”¨æ¬¡è¦èƒŒæ™¯è‰² */
            color: #ffffff;                         /* ç™½è‰²æ–‡å­— */
            border: 1px solid var(--button-orange);  /* æ©™è‰²é‚Šæ¡† */
            border-radius: 6px;                     /* åœ“è§’æ•ˆæœ */
            padding: 8px 0;                         /* ä¸Šä¸‹å…§éƒ¨é–“è· */
            font-size: 16px;                        /* æ–‡å­—å¤§å° */
            font-weight: 600;                       /* æ–‡å­—ç²—ç´° */
            cursor: pointer;                        /* æ»‘é¼ æŒ‡æ¨™è®Šç‚ºæ‰‹å‹ */
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* é™°å½±æ•ˆæœ */
            text-align: center;                     /* æ–‡å­—å±…ä¸­ */
            position: relative;                     /* ç›¸å°å®šä½ */
            overflow: hidden;                      /* éš±è—æº¢å‡ºå…§å®¹ */
            flex: 1;                                /* å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 0;                           /* å…è¨±æŒ‰éˆ•è®Šçª„ */
            margin: 0;                              /* ç§»é™¤å¤–éƒ¨é–“è· */
        }

        /* ç°¡åŒ–æŒ‰éˆ•æ¨£å¼ - ç§»é™¤è¤‡é›œå½å…ƒç´  */
        .function-buttons button {
            background-color: var(--secondary-color); /* æ¬¡è¦èƒŒæ™¯è‰² */
            color: #ffffff;                         /* ç™½è‰²æ–‡å­— */
            border: 1px solid var(--accent-color);  /* å¼·èª¿è‰²é‚Šæ¡† */
            border-radius: 6px;                     /* åœ“è§’æ•ˆæœ */
            padding: 8px 0;                         /* ä¸Šä¸‹å…§é‚Šè· */
            font-size: 16px;                        /* æ–‡å­—å¤§å° */
            font-weight: 600;                       /* æ–‡å­—ç²—ç´° */
            cursor: pointer;                        /* æ»‘é¼ æŒ‡æ¨™ */
            transition: all 0.2s ease;              /* ç°¡åŒ–éæ¸¡æ•ˆæœ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* é™°å½±æ•ˆæœ */
            text-align: center;                     /* æ–‡å­—å±…ä¸­ */
            flex: 1;                                /* å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 0;                           /* å…è¨±æŒ‰éˆ•è®Šçª„ */
            margin: 0;                              /* ç§»é™¤å¤–é‚Šè· */
        }

        /* çµ±ä¸€æ‰€æœ‰æŒ‰éˆ•çš„æ‡¸åœæ•ˆæœ - é¼ æ¨™æ‡¸åœæ™‚çš„è¦–è¦ºè®ŠåŒ– */
        .function-buttons button:hover {
            background-color: var(--button-orange); /* æ©™è‰²èƒŒæ™¯ */
            color: #ffffff;                        /* ç™½è‰²æ–‡å­— */
            transform: translateY(-2px);           /* ä¸Šç§»æ•ˆæœ */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* å¢å¼·é™°å½± */
        }

        /* åŠŸèƒ½æŒ‰éˆ•æ‡¸åœæ™‚å½å…ƒç´ æ•ˆæœ - é¡¯ç¤ºæ»‘å…¥æ•ˆæœ */
        .function-buttons button:hover::before {
            transform: translateX(0);              /* æ»‘å…¥è‡³å¯è¦‹å€åŸŸ */
        }

        /* çµ±ä¸€æ‰€æœ‰æŒ‰éˆ•çš„é»æ“Šæ•ˆæœ - æŒ‰ä¸‹æ™‚çš„è¦–è¦ºåé¥‹ */
        .function-buttons button:active {
            transform: translateY(1px);            /* ä¸‹ç§»æ•ˆæœ */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); /* æ¸›å¼±é™°å½± */
            transition: all 0.1s;                  /* å¿«é€Ÿéæ¸¡æ•ˆæœ */
        }

        /* ä¸»è¦æ“ä½œæŒ‰éˆ•æ¨£å¼ - èˆ‡ä¸€èˆ¬åŠŸèƒ½æŒ‰éˆ•ä¸€è‡´ */
        .function-buttons .main-action-btn {
            background-color: var(--secondary-color); /* ä½¿ç”¨æ¬¡è¦èƒŒæ™¯è‰² */
            color: #ffffff;                        /* ç™½è‰²æ–‡å­— */
            padding: 8px 0;                        /* ä¸Šä¸‹å…§éƒ¨é–“è· */
            border: 1px solid var(--button-orange); /* æ©™è‰²é‚Šæ¡† */
        }

        /* ä¸»è¦æ“ä½œæŒ‰éˆ•å½å…ƒç´  - é™ä½æ¼¸è®Šäº®åº¦ */
        .function-buttons .main-action-btn::before {
            background: linear-gradient(to right, rgba(255, 255, 255, 0.05), transparent); /* è¼ƒæ·¡çš„æ¼¸è®Š */
        }

        /* ä¸»è¦æ“ä½œæŒ‰éˆ•æ‡¸åœæ•ˆæœ - æ›´æ˜é¡¯çš„æ‡¸åœæ¨£å¼ */
        .function-buttons .main-action-btn:hover {
            background-color: var(--button-orange); /* æ©™è‰²èƒŒæ™¯ */
            box-shadow: 0 7px 14px rgba(255, 156, 51, 0.4); /* æ©™è‰²é™°å½± */
            transform: translateY(-3px);           /* æ›´æ˜é¡¯çš„ä¸Šç§» */
        }

        /* ä¸»è¦æ“ä½œæŒ‰éˆ•é»æ“Šæ•ˆæœ - æŒ‰ä¸‹æ™‚çš„è¦–è¦ºåé¥‹ */
        .function-buttons .main-action-btn:active {
            transform: translateY(1px);            /* ä¸‹ç§»æ•ˆæœ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* è¼•å¾®é™°å½± */
        }

        /* åŠŸèƒ½æŒ‰éˆ•æ‡¸åœæ•ˆæœ - æ”¹è®ŠæŒ‰éˆ•é¡è‰²å’Œæ–‡å­— */
        .function-buttons button:hover {
            background-color: var(--button-orange); /* æ©™è‰²èƒŒæ™¯ */
            color: var(--text-color);               /* ä½¿ç”¨ä¸»è¦æ–‡å­—é¡è‰² */
            border-color: var(--button-orange);     /* æ©™è‰²é‚Šæ¡† */
        }

        /* åŠŸèƒ½æŒ‰éˆ•é»æ“Šæ•ˆæœ - é»æ“Šæ™‚çš„é¡è‰²è®ŠåŒ– */
        .function-buttons button:active {
            background-color: var(--secondary-color); /* æ¢å¾©æ¬¡è¦èƒŒæ™¯è‰² */
            color: var(--button-orange);             /* æ©™è‰²æ–‡å­— */
            border-color: var(--button-orange);      /* æ©™è‰²é‚Šæ¡† */
        }

        /* ç™¼å…‰æ•ˆæœå‹•ç•« - æ§åˆ¶åˆ†éš”ç·šä¸­çš„æµå…‰æ•ˆæœ */
        @keyframes dividerGlow {
            0% {
                left: -100%;      /* é–‹å§‹åœ¨å·¦å´å¤–éƒ¨ */
            }
            50% {
                left: 100%;       /* ä¸­é–“ç§»å‹•åˆ°å³å´ */
            }
            100% {
                left: 100%;       /* çµæŸæ–¼å³å´ */
            }
        }

        /* æ¨¡æ…‹æ¡†èƒŒæ™¯æ¨£å¼ - è¦†è“‹æ•´å€‹é é¢çš„åŠé€æ˜èƒŒæ™¯ */
        .modal-overlay {
            display: none;                                    /* åˆå§‹éš±è— */
            position: fixed;                                  /* å›ºå®šå®šä½ */
            top: 0;                                          /* è²¼é½Šé ‚éƒ¨ */
            left: 0;                                         /* è²¼é½Šå·¦å´ */
            width: 100%;                                     /* å¯¬åº¦100% */
            height: 100%;                                    /* é«˜åº¦100% */
            background-color: rgba(var(--primary-color-rgb), 0.7); /* åŠé€æ˜èƒŒæ™¯ */
            z-index: 2000;                                   /* å±¤ç´š */
            justify-content: center;                         /* æ°´å¹³å±…ä¸­ */
            align-items: center;                             /* å‚ç›´å±…ä¸­ */
            animation: fadeIn 0.3s ease-out;                 /* æ·¡å…¥å‹•ç•« */
        }

        /* æ¨¡æ…‹æ¡†å®¹å™¨æ¨£å¼ - é¡¯ç¤ºå…§å®¹çš„ä¸­å¿ƒå€åŸŸ */
        .modal-container {
            background-color: var(--primary-color);          /* ä¸»èƒŒæ™¯è‰² */
            border-radius: 10px;                             /* åœ“è§’æ•ˆæœ */
            width: 90%;                                      /* å®¹å™¨å¯¬åº¦ */
            max-width: 350px;                                /* æœ€å¤§å¯¬åº¦ */
            box-shadow: 0 10px 25px rgba(var(--shadow-color)); /* é™°å½±æ•ˆæœ */
            animation: modalSlideIn 0.3s ease-out;           /* æ»‘å…¥å‹•ç•« */
            overflow: hidden;                                /* éš±è—æº¢å‡ºå…§å®¹ */
        }

        /* æ¨¡æ…‹æ¡†æ»‘å…¥å‹•ç•« - å®šç¾©æ¨¡æ…‹æ¡†é€²å…¥ç•«é¢çš„æ•ˆæœ */
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-30px); } /* åˆå§‹åœ¨ä¸Šæ–¹ä¸”é€æ˜ */
            to { opacity: 1; transform: translateY(0); }       /* æœ€çµ‚åœ¨æ­£å¸¸ä½ç½®ä¸”ä¸é€æ˜ */
        }

        /* æ¨¡æ…‹æ¡†é ­éƒ¨æ¨£å¼ - åŒ…å«æ¨™é¡Œå’Œé—œé–‰æŒ‰éˆ•çš„é ‚éƒ¨å€åŸŸ */
        .modal-header {
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            justify-content: space-between;                  /* å…©ç«¯å°é½Š */
            align-items: center;                             /* å‚ç›´å±…ä¸­ */
            padding: 15px;                                   /* å…§éƒ¨é–“è· */
            border-bottom: 1px solid var(--border-color);    /* åº•éƒ¨é‚Šæ¡† */
            background-color: var(--secondary-color);        /* æ¬¡è¦èƒŒæ™¯è‰² */
        }

        /* è²¸æ¬¾æ¯”è¼ƒé é¢çš„ç‰¹æ®Šæ¨™é¡Œæ¨£å¼ */
        #multiLoanComparisonModal .modal-header {
            min-height: 56px; /* ç¢ºä¿æœ‰è¶³å¤ é«˜åº¦å®¹ç´æŒ‰éˆ• */
            padding: 12px 15px; /* èª¿æ•´å…§è· */
        }

        /* æ¨¡æ…‹æ¡†æ¨™é¡Œæ¨£å¼ - é ‚éƒ¨æ¨™é¡Œæ–‡å­— */
        .modal-header h3 {
            margin: 0;                                       /* ç§»é™¤å¤–éƒ¨é–“è· */
            color: var(--accent-color);                      /* å¼·èª¿è‰²æ–‡å­— */
            font-size: 18px;                                 /* æ–‡å­—å¤§å° */
        }

        /* æ¨¡æ…‹æ¡†å…§å®¹å€åŸŸæ¨£å¼ - é¡¯ç¤ºä¸»è¦å…§å®¹çš„å€åŸŸ */
        .modal-content {
            padding: 20px 15px;                              /* å…§éƒ¨é–“è· */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            max-height: 100vh;                                /* æœ€å¤§é«˜åº¦ */
            overflow-y: auto;                                /* å‚ç›´æ»¾å‹• */
        }

        /* æ¨¡æ…‹æ¡†åº•éƒ¨å€åŸŸæ¨£å¼ - åŒ…å«æ“ä½œæŒ‰éˆ•çš„åº•éƒ¨å€åŸŸ */
        .modal-footer {
            padding: 10px 15px 15px;                         /* å…§éƒ¨é–“è· */
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            justify-content: flex-end;                       /* å³å°é½Š */
            gap: 10px;                                       /* æŒ‰éˆ•é–“è· */
            border-top: 1px solid var(--border-color);       /* é ‚éƒ¨é‚Šæ¡† */
            background-color: var(--secondary-color);        /* æ¬¡è¦èƒŒæ™¯è‰² */
        }

        /* æ¨¡æ…‹æ¡†æŒ‰éˆ•å…±ç”¨æ¨£å¼ - æ¨¡æ…‹æ¡†ä¸­æ‰€æœ‰æŒ‰éˆ•çš„åŸºæœ¬æ¨£å¼ */
        .modal-btn {
            padding: 8px 15px;                               /* å…§éƒ¨é–“è· */
            border-radius: 10px;                             /* åœ“è§’æ•ˆæœ */
            cursor: pointer;                                 /* æ»‘é¼ æŒ‡æ¨™è®Šç‚ºæ‰‹å‹ */
            font-size: 15px;                                 /* æ–‡å­—å¤§å° */
            transition: all 0.3s ease;                       /* éæ¸¡æ•ˆæœ */
            border: none;                                    /* ç„¡é‚Šæ¡† */
        }

        /* æ¨¡æ…‹æ¡†ä¸»è¦æŒ‰éˆ•æ¨£å¼ - ç”¨æ–¼ç¢ºèªã€æäº¤ç­‰ä¸»è¦æ“ä½œ */
        .modal-btn-primary {
            background-color: var(--accent-color);           /* å¼·èª¿è‰²èƒŒæ™¯ */
            color: white;                                    /* ç™½è‰²æ–‡å­— */
        }

        /* æ¨¡æ…‹æ¡†ä¸»è¦æŒ‰éˆ•æ‡¸åœæ•ˆæœ - é¼ æ¨™æ‡¸åœæ™‚çš„è¦–è¦ºè®ŠåŒ– */
        .modal-btn-primary:hover {
            background-color: var(--accent-color-dark);      /* æ·±è‰²å¼·èª¿èƒŒæ™¯ */
            transform: translateY(-2px);                     /* ä¸Šç§»æ•ˆæœ */
        }

        /* æ¨¡æ…‹æ¡†æ¬¡è¦æŒ‰éˆ•æ¨£å¼ - ç”¨æ–¼å–æ¶ˆã€è¿”å›ç­‰æ¬¡è¦æ“ä½œ */
        .modal-btn-secondary {
            background-color: var(--secondary-color);        /* æ¬¡è¦èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            border: 1px solid var(--border-color);           /* é‚Šæ¡† */
        }

        /* æ¨¡æ…‹æ¡†æ¬¡è¦æŒ‰éˆ•æ‡¸åœæ•ˆæœ - é¼ æ¨™æ‡¸åœæ™‚çš„è¦–è¦ºè®ŠåŒ– */
        .modal-btn-secondary:hover {
            background-color: var(--hover-color);            /* æ‡¸åœèƒŒæ™¯è‰² */
            transform: translateY(-2px);                     /* ä¸Šç§»æ•ˆæœ */
        }

        /* æç¤ºæ¡†æ¨£å¼ - é¡¯ç¤ºçŸ­æš«æ¶ˆæ¯çš„æµ®å‹•æç¤º */
        .toast-message {
            position: fixed;                                 /* å›ºå®šå®šä½ */
            bottom: 60px;                                    /* è·åº•éƒ¨è·é›¢ */
            left: 50%;                                       /* æ°´å¹³å±…ä¸­ */
            transform: translateX(-50%);                     /* ç²¾ç¢ºå±…ä¸­ */
            background-color: rgba(var(--info-color-rgb), 0.9); /* åŠé€æ˜ä¿¡æ¯è‰²èƒŒæ™¯ */
            color: white;                                    /* ç™½è‰²æ–‡å­— */
            padding: 10px 20px;                              /* å…§éƒ¨é–“è· */
            border-radius: 5px;                              /* åœ“è§’æ•ˆæœ */
            z-index: 9999;                                   /* æœ€é«˜å±¤ç´š */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
            box-shadow: 0 2px 10px var(--shadow-color);      /* é™°å½±æ•ˆæœ */
            opacity: 1;                                      /* å®Œå…¨ä¸é€æ˜ */
            transition: opacity 0.5s ease;                   /* é€æ˜åº¦éæ¸¡æ•ˆæœ */
        }

        /* æ•¸å­—è¼¸å…¥æ¨¡æ…‹æ¡†æ¨£å¼ - è‡ªå®šç¾©è¨ˆç®—å™¨è¼¸å…¥ç•Œé¢ */
        .number-input-modal {
            background-color: var(--primary-color);          /* ä¸»èƒŒæ™¯è‰² */
            border-radius: 12px;                             /* åœ“è§’æ•ˆæœ */
            width: 95%;                                      /* å®¹å™¨å¯¬åº¦ */
            max-width: 350px;                                /* æœ€å¤§å¯¬åº¦ */
            box-shadow: 0 10px 25px var(--shadow-color);     /* é™°å½±æ•ˆæœ */
            overflow: hidden;                                /* éš±è—æº¢å‡ºå…§å®¹ */
            animation: modalSlideIn 0.3s ease-out;           /* æ»‘å…¥å‹•ç•« */
        }

        /* è¨ˆç®—å™¨é¡¯ç¤ºå€åŸŸ - é¡¯ç¤ºè¨ˆç®—è¼¸å…¥èˆ‡çµæœçš„å€åŸŸ */
        .calculator-display {
            background-color: var(--input-bg);               /* è¼¸å…¥æ¡†èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            font-size: 32px;                                 /* æ–‡å­—å¤§å° */
            padding: 10px 15px;                              /* å…§éƒ¨é–“è· */
            text-align: right;                               /* æ–‡å­—å³å°é½Š */
            margin: 10px;                                    /* å¤–éƒ¨é–“è· */
            border-radius: 6px;                              /* åœ“è§’æ•ˆæœ */
            border: 1px solid var(--border-color);           /* é‚Šæ¡† */
            height: 46px;                                    /* å›ºå®šé«˜åº¦ */
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            align-items: center;                             /* å‚ç›´å±…ä¸­ */
            justify-content: flex-end;                       /* å³å°é½Š */
            overflow: hidden;                                /* éš±è—æº¢å‡ºå…§å®¹ */
            box-shadow: inset 0 2px 4px var(--shadow-color); /* å…§é™°å½±æ•ˆæœ */
        }

        /* è¨ˆç®—å™¨é¡¯ç¤ºå®¹å™¨ - åŒ…å«è¨ˆç®—æ­·å²å’Œç•¶å‰è¼¸å…¥çš„å®¹å™¨ */
        .calculator-display-container {
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            flex-direction: column;                          /* å‚ç›´æ’åˆ— */
            background-color: var(--input-bg);               /* è¼¸å…¥æ¡†èƒŒæ™¯è‰² */
            margin: 10px;                                    /* å¤–éƒ¨é–“è· */
            border-radius: 10px;                             /* åœ“è§’æ•ˆæœ */
            border: 1px solid var(--border-color);           /* é‚Šæ¡† */
            box-shadow: inset 0 2px 8px var(--shadow-color); /* å…§é™°å½±æ•ˆæœ */
            overflow: hidden;                                /* éš±è—æº¢å‡ºå…§å®¹ */
            height: 110px;                                   /* å›ºå®šé«˜åº¦ */
            position: relative;                              /* ç›¸å°å®šä½ */
        }

        /* è¨ˆç®—å™¨æ­·å²è¨˜éŒ„å€åŸŸ - é¡¯ç¤ºå…ˆå‰çš„è¨ˆç®—æ­¥é©Ÿ */
        .calculator-history {
            color: var(--text-muted);                        /* æ·¡è‰²æ–‡å­— */
            font-size: 16px;                                 /* æ–‡å­—å¤§å° */
            padding: 8px 15px;                               /* å…§éƒ¨é–“è· */
            text-align: right;                               /* æ–‡å­—å³å°é½Š */
            height: 40px;                                    /* å›ºå®šé«˜åº¦ */
            overflow-y: hidden;                              /* éš±è—å‚ç›´æº¢å‡º */
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            flex-direction: column;                          /* å‚ç›´æ’åˆ— */
            justify-content: flex-end;                       /* åº•éƒ¨å°é½Š */
            line-height: 1.3;                                /* è¡Œé«˜ */
            word-break: break-all;                           /* å…è¨±å–®è©å…§æ›è¡Œ */
            font-family: 'Consolas', monospace;              /* ç­‰å¯¬å­—é«” */
            position: relative;                              /* ç›¸å°å®šä½ */
            background: linear-gradient(to bottom, 
                rgba(var(--input-bg-rgb), 0.8), 
                rgba(var(--secondary-color-rgb), 0.8));      /* æ¼¸è®ŠèƒŒæ™¯ */
        }

        /* è¨ˆç®—å™¨æ­·å²è¨˜éŒ„åº•éƒ¨åˆ†éš”ç·š - å‰µå»ºè¦–è¦ºåˆ†éš” */
        .calculator-history::after {
            content: '';                                     /* å‰µå»ºç©ºå…§å®¹ */
            position: absolute;                              /* çµ•å°å®šä½ */
            left: 0;                                         /* è²¼é½Šå·¦å´ */
            right: 0;                                        /* è²¼é½Šå³å´ */
            bottom: 0;                                       /* è²¼é½Šåº•éƒ¨ */
            height: 1px;                                     /* é«˜åº¦1åƒç´  */
            background: linear-gradient(to right, transparent, 
                rgba(var(--accent-color-rgb), 0.4), transparent); /* æ¼¸è®ŠèƒŒæ™¯ */
        }

        /* è¨ˆç®—å™¨é¡¯ç¤ºå€åŸŸå¢å¼·æ¨£å¼ - ä¸»é¡¯ç¤ºå€çš„è¦–è¦ºæ•ˆæœ */
        .calculator-display {
            background-color: var(--input-bg);               /* è¼¸å…¥æ¡†èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            font-size: 36px;                                 /* è¼ƒå¤§æ–‡å­—å¤§å° */
            padding: 10px 15px;                              /* å…§éƒ¨é–“è· */
            text-align: right;                               /* æ–‡å­—å³å°é½Š */
            flex: 1;                                         /* ä½”ç”¨å‰©é¤˜ç©ºé–“ */
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            align-items: center;                             /* å‚ç›´å±…ä¸­ */
            justify-content: flex-end;                       /* å³å°é½Š */
            overflow: hidden;                                /* éš±è—æº¢å‡ºå…§å®¹ */
            margin: 0;                                       /* ç§»é™¤å¤–éƒ¨é–“è· */
            border: none;                                    /* ç§»é™¤é‚Šæ¡† */
            box-shadow: none;                                /* ç§»é™¤é™°å½± */
            font-family: 'Consolas', monospace;              /* ç­‰å¯¬å­—é«” */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
            letter-spacing: 1px;                             /* å­—ç¬¦é–“è· */
            border-bottom-left-radius: 8px;                  /* å·¦ä¸‹åœ“è§’ */
            border-bottom-right-radius: 8px;                 /* å³ä¸‹åœ“è§’ */
            position: relative;                              /* ç›¸å°å®šä½ */
            background: linear-gradient(to bottom, 
                rgba(var(--input-bg-rgb), 0.9), 
                rgba(var(--input-bg-rgb), 0.7));             /* æ¼¸è®ŠèƒŒæ™¯ */
            text-shadow: 0 1px 2px var(--shadow-color);      /* æ–‡å­—é™°å½± */
        }

        /* è¨ˆç®—å™¨æ»¾å‹•æŒ‡ç¤ºå™¨ - é¡¯ç¤ºå…§å®¹å¯æ»¾å‹•çš„æç¤º */
        .calculator-scroll-indicator {
            position: absolute;                              /* çµ•å°å®šä½ */
            top: 5px;                                        /* è·é ‚éƒ¨è·é›¢ */
            right: 5px;                                      /* è·å³å´è·é›¢ */
            width: 12px;                                     /* å¯¬åº¦ */
            height: 12px;                                    /* é«˜åº¦ */
            background-color: rgba(var(--accent-color-rgb), 0.7); /* åŠé€æ˜å¼·èª¿è‰²èƒŒæ™¯ */
            border-radius: 50%;                              /* åœ“å½¢æ•ˆæœ */
            opacity: 0;                                      /* åˆå§‹é€æ˜ */
            transition: opacity 0.3s ease;                   /* é€æ˜åº¦éæ¸¡æ•ˆæœ */
            z-index: 10;                                     /* å±¤ç´š */
        }

        /* è¨ˆç®—å™¨æŒ‰éˆ•å€åŸŸ - åŒ…å«æ‰€æœ‰è¨ˆç®—å™¨æŒ‰éˆ•çš„ç¶²æ ¼ */
        .calculator-buttons {
            display: grid;                                   /* ç¶²æ ¼å¸ƒå±€ */
            grid-template-columns: repeat(4, 1fr);           /* å››åˆ—ç­‰å¯¬ */
            grid-template-rows: repeat(5, auto);             /* äº”è¡Œè‡ªå‹•é«˜åº¦ */
            gap: 6px;                                        /* ç¶²æ ¼é–“è· */
            padding: 10px;                                   /* å…§éƒ¨é–“è· */
        }

        /* è¨ˆç®—å™¨æŒ‰éˆ•åŸºæœ¬æ¨£å¼ - æ‰€æœ‰æŒ‰éˆ•çš„å…±åŒæ¨£å¼ */
        .calculator-buttons button {
            padding: 10px 0;                                 /* ä¸Šä¸‹å…§éƒ¨é–“è· */
            font-size: 20px;                                 /* æ–‡å­—å¤§å° */
            border-radius: 10px;                             /* åœ“è§’æ•ˆæœ */
            background-color: var(--secondary-color);        /* æ¬¡è¦èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            border: none;                                    /* ç§»é™¤é‚Šæ¡† */
            transition: all 0.2s ease;                       /* éæ¸¡æ•ˆæœ */
            margin: 0;                                       /* ç§»é™¤å¤–éƒ¨é–“è· */
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            align-items: center;                             /* å‚ç›´å±…ä¸­ */
            justify-content: center;                         /* æ°´å¹³å±…ä¸­ */
            height: 48px;                                    /* å›ºå®šé«˜åº¦ */
            box-shadow: 0 2px 4px var(--shadow-color);       /* é™°å½±æ•ˆæœ */
            position: relative;                              /* ç›¸å°å®šä½ */
            overflow: hidden;                                /* éš±è—æº¢å‡ºå…§å®¹ */
        }

        /* è¨ˆç®—å™¨æŒ‰éˆ•æ‡¸åœæ•ˆæœ - é¼ æ¨™æ‡¸åœæ™‚çš„è¦–è¦ºè®ŠåŒ– */
        .calculator-buttons button:hover {
            background-color: var(--hover-color);            /* æ‡¸åœèƒŒæ™¯è‰² */
            transform: translateY(-2px);                     /* ä¸Šç§»æ•ˆæœ */
            box-shadow: 0 4px 8px var(--shadow-color);       /* å¢å¼·é™°å½± */
        }

        /* è¨ˆç®—å™¨æŒ‰éˆ•é»æ“Šæ•ˆæœ - é»æ“Šæ™‚çš„è¦–è¦ºåé¥‹ */
        .calculator-buttons button:active {
            transform: scale(0.95);                          /* ç¸®å°æ•ˆæœ */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);        /* æ¸›å¼±é™°å½± */
        }

        /* æ•¸å­—æŒ‰éˆ•æ¨£å¼ */
        /* æ•¸å­—æŒ‰éˆ•æ¨£å¼ - æ°´å¹³æ’åˆ—æ•¸å­—å’Œè²¡å‹™ç¬¦è™Ÿ */
        .calculator-buttons .number-btn {
            display: flex;                                   /* å½ˆæ€§å¸ƒå±€ */
            flex-direction: row;                             /* æ°´å¹³æ’åˆ— */
            align-items: center;                             /* å‚ç›´å±…ä¸­ */
            justify-content: center;                         /* æ°´å¹³å±…ä¸­ */
            padding: 5px 2px;                                /* å…§éƒ¨é–“è· */
            position: relative;                              /* ç›¸å°å®šä½ */
        }

        /* é˜¿æ‹‰ä¼¯æ•¸å­—æ¨£å¼ - ä¸»è¦é¡¯ç¤ºçš„æ•¸å­— */
        .calculator-buttons .arabic-number {
            font-size: 28px;                                 /* è¼ƒå¤§æ–‡å­—å¤§å° */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
            line-height: 1;                                  /* è¡Œé«˜ */
            margin-right: 3px;                               /* å³å´å¤–éƒ¨é–“è· */
            flex-grow: 0;                                    /* ç¦æ­¢å¢é•· */
        }

        /* è²¡å‹™ç¬¦è™Ÿæ¨£å¼ - é¡¯ç¤ºåœ¨æŒ‰éˆ•ä¸Šçš„ä¸­æ–‡æ•¸å­— */
        .calculator-buttons .financial-char {
            font-size: 18px;                                 /* è¼ƒå°æ–‡å­—å¤§å° */
            color: var(--button-orange);                     /* æ©™è‰²æ–‡å­— */
            line-height: 1;                                  /* è¡Œé«˜ */
            position: absolute;                              /* çµ•å°å®šä½ */
            right: 6px;                                      /* è·å³å´è·é›¢ */
            opacity: 0.9;                                    /* è¼•å¾®é€æ˜ */
        }

        /* æ•¸å­—æŒ‰éˆ•ç›¸å°å®šä½ - ç¢ºä¿å…§éƒ¨å…ƒç´ çš„æ­£ç¢ºå®šä½ */
        .calculator-buttons .number-btn {
            position: relative;                              /* ç›¸å°å®šä½ */
        }

        /* é˜¿æ‹‰ä¼¯æ•¸å­—å³å´é–“è· - ç‚ºè²¡å‹™ç¬¦è™Ÿç•™å‡ºç©ºé–“ */
        .calculator-buttons .number-btn .arabic-number {
            margin-right: 3px;                               /* å³å´å¤–éƒ¨é–“è· */
        }

        /* è²¡å‹™ç¬¦è™Ÿå®šä½ - å›ºå®šåœ¨æŒ‰éˆ•å³å´ */
        .calculator-buttons .number-btn .financial-char {
            right: 6px;                                      /* è·å³å´è·é›¢ */
            font-size: 18px;                                 /* æ–‡å­—å¤§å° */
            color: var(--accent-color);                      /* å¼·èª¿è‰²æ–‡å­— */
            position: absolute;                              /* çµ•å°å®šä½ */
            opacity: 0.9;                                    /* è¼•å¾®é€æ˜ */
        }

        /* æ•¸å­—æŒ‰éˆ•é»æ“Šæ™‚çš„æ–‡å­—é¡è‰²è®ŠåŒ– - æä¾›è¦–è¦ºåé¥‹ */
        .calculator-buttons .number-btn:active .arabic-number,
        .calculator-buttons .number-btn:active .financial-char {
            color: white;                                    /* ç™½è‰²æ–‡å­— */
        }

        /* é›¶éµæ¨£å¼ - èª¿æ•´é›¶æŒ‰éˆ•çš„ç‰¹æ®Šå¸ƒå±€ */
        .calculator-buttons .zero {
            background-color: #3a3a3a;                       /* æ·±ç°èƒŒæ™¯ */
            flex-direction: column;                          /* å‚ç›´æ’åˆ— */
            align-items: center;                             /* æ°´å¹³å±…ä¸­ */
            justify-content: center;                         /* å‚ç›´å±…ä¸­ */
        }

        /* é‹ç®—ç¬¦å’Œç­‰è™Ÿæ–‡å­—å¤§å° - ç¢ºä¿è¦–è¦ºå¹³è¡¡ */
        .calculator-buttons .operator,
        .calculator-buttons .equals {
            font-size: 22px;                                 /* æ–‡å­—å¤§å° */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
        }

        /* æ¸…é™¤å’ŒåŠŸèƒ½éµæ–‡å­—å¤§å° - çµ±ä¸€ç‰¹æ®ŠæŒ‰éˆ•çš„æ–‡å­—å¤§å° */
        .calculator-buttons .clear,
        .calculator-buttons .function {
            font-size: 20px;                                 /* æ–‡å­—å¤§å° */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
        }

        /* åŠŸèƒ½éµæ¨£å¼ - ç‰¹æ®ŠåŠŸèƒ½æŒ‰éˆ•çš„é¡è‰² */
        .calculator-buttons .function {
            background-color: #4d4d4d;                       /* ä¸­ç°è‰²èƒŒæ™¯ */
            color: #eee;                                     /* æ·ºç°è‰²æ–‡å­— */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
        }

        /* é‹ç®—ç¬¦è™Ÿæ¨£å¼ - æ•¸å­¸é‹ç®—ç¬¦æŒ‰éˆ•çš„é¡è‰² */
        .calculator-buttons .operator {
            background-color: var(--accent-color);           /* å¼·èª¿è‰²èƒŒæ™¯ */
            color: white;                                    /* ç™½è‰²æ–‡å­— */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
            box-shadow: 0 2px 6px rgba(var(--accent-color-rgb), 0.4); /* å¼·èª¿è‰²é™°å½± */
        }

        /* æ¸…é™¤éµæ¨£å¼ - æ¸…é™¤æŒ‰éˆ•çš„é¡è‰² */
        .calculator-buttons .clear {
            background-color: var(--error-color);            /* éŒ¯èª¤è‰²èƒŒæ™¯ */
            color: white;                                    /* ç™½è‰²æ–‡å­— */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
            box-shadow: 0 2px 6px rgba(var(--error-color-rgb), 0.4); /* éŒ¯èª¤è‰²é™°å½± */
        }

        /* ç­‰è™Ÿéµæ¨£å¼ - ç­‰è™ŸæŒ‰éˆ•çš„é¡è‰² */
        .calculator-buttons .equals {
            background-color: var(--info-color);             /* ä¿¡æ¯è‰²èƒŒæ™¯ */
            color: white;                                    /* ç™½è‰²æ–‡å­— */
            font-weight: bold;                               /* æ–‡å­—ç²—ç´° */
            box-shadow: 0 2px 6px rgba(var(--info-color-rgb), 0.4); /* ä¿¡æ¯è‰²é™°å½± */
        }

        /* é›¶éµä½”æ“šå…©æ¬„ - æ“´å±•é›¶æŒ‰éˆ•çš„å¯¬åº¦ */
        .calculator-buttons .zero {
            grid-column: span 2;                            /* ä½”æ“šå…©åˆ— */
            background-color: #3a3a3a;                      /* æ·±ç°è‰²èƒŒæ™¯ */
        }

        /* æäº¤æŒ‰éˆ•ä½”æ“šå…©æ¬„ - æ“´å±•ç¢ºèªæŒ‰éˆ•çš„å¯¬åº¦ */
        .calculator-buttons .submit {
            grid-column: span 2;                            /* ä½”æ“šå…©åˆ— */
            background-color: var(--accent-color);          /* å¼·èª¿è‰²èƒŒæ™¯ */
            color: white;                                   /* ç™½è‰²æ–‡å­— */
            font-weight: bold;                              /* æ–‡å­—ç²—ç´° */
            box-shadow: 0 2px 6px rgba(var(--accent-color-rgb), 0.4); /* å¼·èª¿è‰²é™°å½± */
        }

        /* éŒ¯èª¤æç¤ºæ¨£å¼ - é¡¯ç¤ºéŒ¯èª¤ä¿¡æ¯çš„toast */
        .toast-error {
            background-color: rgba(var(--error-color-rgb), 0.9); /* åŠé€æ˜éŒ¯èª¤è‰²èƒŒæ™¯ */
        }

        /* æ·»åŠ ç®­é ­æ—‹è½‰å‹•ç•« - æ§åˆ¶å±•é–‹/æ”¶èµ·æŒ‡ç¤ºå™¨ */
        #toggleIcon {
            display: inline-block;                          /* è¡Œå…§å¡Šé¡¯ç¤º */
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* å¹³æ»‘éæ¸¡æ•ˆæœ */
        }

        /* æŒ‰éˆ•çµ„çš„è½‰æ›æ•ˆæœ - æ§åˆ¶æŒ‰éˆ•çµ„çš„å±•é–‹/æ”¶èµ· */
        .input-button-group div[id$="Buttons"] {
            max-height: 100px;                              /* æœ€å¤§é«˜åº¦ */
            opacity: 1;                                     /* å®Œå…¨ä¸é€æ˜ */
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å¹³æ¿åŠä»¥ä¸Šè¨­å‚™çš„é©é… */
        @media screen and (min-width: 768px) {
            .menu-content, .submenu-content {
                width: 320px;                                /* å›ºå®šå¯¬åº¦ */
            }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - æ¡Œé¢è¨­å‚™çš„é©é… */
        @media screen and (min-width: 1024px) {
            .menu-btn {
                width: 24px;                                 /* æŒ‰éˆ•å¯¬åº¦ */
                height: 24px;                                /* æŒ‰éˆ•é«˜åº¦ */
                font-size: 18px;                             /* æ–‡å­—å¤§å° */
                left: 12px;                                  /* è·å·¦å´è·é›¢ */
            }
            
            .menu-item, .submenu-item {
                padding: 14px 18px;                          /* å…§éƒ¨é–“è· */
            }
            
            .menu-header h3, .submenu-header h3 {
                font-size: 20px;                             /* æ–‡å­—å¤§å° */
            }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å°å‹æ‰‹æ©Ÿçš„é©é… */
        @media screen and (max-width: 480px) {
            .menu-content, .submenu-content {
                width: 85%;                                  /* æ›´å¯¬çš„æ¯”ä¾‹ */
            }
        }

        /* è¡Œå®¹å™¨åŸºç¤æ¨£å¼ - çµ±ä¸€çš„è³‡æ–™è¼¸å…¥å€åŸŸå¤–è§€ */
        .row {
            margin: 4px 0;                               /* ä¸Šä¸‹å¤–é‚Šè· */
            display: flex;                               /* å½ˆæ€§å¸ƒå±€ï¼Œè®“å­å…ƒç´ æ°´å¹³æ’åˆ— */
            align-items: center;                         /* å‚ç›´ç½®ä¸­å°é½Š */
            background-color: var(--secondary-color);   /* ä½¿ç”¨ä¸»é¡Œæ¬¡è¦èƒŒæ™¯è‰² */
            padding: 3px;                               /* å…§é‚Šè· */
            border-radius: 4px;                         /* åœ†è§’æ•ˆæœ */
            box-shadow: 0 4px 8px var(--shadow-color);  /* é™°å½±æ•ˆæœ */
            border-left: 3px solid transparent;         /* é€æ˜å·¦å´é‚Šæ¡†ï¼Œç‚ºæ‡¸åœæ•ˆæœé ç•™ */
            transition: all var(--transition-normal) ease; /* å¹³æ»‘éæ¸¡å‹•ç•« */
            position: relative;                          /* ç›¸å°å®šä½ï¼Œç”¨æ–¼å½å…ƒç´ å®šä½ */
            transform-origin: left;                      /* è®Šå½¢åŸé»è¨­åœ¨å·¦å´ */
        }

        /* è¡Œæ¨™ç±¤æ–‡å­—é¡è‰² - ä½¿ç”¨ä¸»é¡Œæ–‡å­—è‰² */
        .row .label {
            color: var(--text-color);                        /* ä½¿ç”¨æ–‡å­—é¡è‰² */
        }

        /* å¼·èª¿è¡Œæ¨£å¼ - ç‰¹æ®Šçªå‡ºé¡¯ç¤ºçš„è¡Œ */
        .emphasized-row {
            border-left: 3px solid var(--accent-color);      /* å¼·èª¿è‰²å·¦å´é‚Šæ¡† */
            background: linear-gradient(90deg, var(--accent-color-light), transparent); /* æ¼¸è®ŠèƒŒæ™¯ */
        }

        /* å¼·èª¿è¡Œæ¨™ç±¤æ–‡å­—é¡è‰² - ä½¿ç”¨å¼·èª¿è‰² */
        .emphasized-row .label {
            color: var(--accent-color);                      /* å¼·èª¿è‰²æ–‡å­— */
        }

        /* å¼·èª¿è¡Œè¼¸å…¥æ¡†é‚Šæ¡† - ä½¿ç”¨å¼·èª¿è‰²é‚Šæ¡† */
        .emphasized-row input {
            border-color: var(--accent-color);               /* å¼·èª¿è‰²é‚Šæ¡† */
        }

        /* è¼¸å…¥æ¡†æ¨£å¼ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        input {
            background-color: var(--input-bg);               /* ä½¿ç”¨è¼¸å…¥æ¡†èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* ä½¿ç”¨æ–‡å­—é¡è‰² */
            border: 1px solid var(--input-border);           /* ä½¿ç”¨è¼¸å…¥æ¡†é‚Šæ¡†è‰² */
        }

        /* è¼¸å…¥æ¡†èšç„¦æ•ˆæœ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        input:focus {
            border-color: var(--accent-color);               /* å¼·èª¿è‰²é‚Šæ¡† */
            box-shadow: 0 0 0 3px var(--accent-color-light); /* æ·¡è‰²å¼·èª¿é™°å½± */
        }

        /* æŒ‰éˆ•æ¨£å¼ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        button {
            background-color: var(--secondary-color);        /* æ¬¡è¦èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            border: 1px solid var(--border-color);           /* é‚Šæ¡†è‰² */
        }

        /* æŒ‰éˆ•æ‡¸åœæ•ˆæœ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        button:hover {
            background-color: var(--hover-color);            /* æ‡¸åœèƒŒæ™¯è‰² */
        }

        /* åŠŸèƒ½æŒ‰éˆ•æ¨£å¼ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .function-buttons button {
            background-color: var(--secondary-color);        /* æ¬¡è¦èƒŒæ™¯è‰² */
            color: var(--text-color);                        /* æ–‡å­—é¡è‰² */
            border: 1px solid var(--accent-color);           /* å¼·èª¿è‰²é‚Šæ¡† */
        }

        /* åŠŸèƒ½æŒ‰éˆ•æ‡¸åœæ•ˆæœ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .function-buttons button:hover {
            background-color: var(--accent-color);           /* å¼·èª¿è‰²èƒŒæ™¯ */
        }

        /* æç¤ºè¨Šæ¯æ¨£å¼ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .toast-message {
            background-color: var(--info-color);             /* ä¿¡æ¯è‰²èƒŒæ™¯ */
        }

        /* éŒ¯èª¤æç¤ºæ¨£å¼ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .toast-error {
            background-color: var(--error-color);            /* éŒ¯èª¤è‰²èƒŒæ™¯ */
        }

        /* è­¦å‘Šæ–‡å­—æ¨£å¼ - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .warning-text {
            color: var(--error-color) !important;            /* å¼·åˆ¶ä½¿ç”¨éŒ¯èª¤è‰²æ–‡å­— */
        }

        /* æ­·å²è¨˜éŒ„é …ç›®å·¦å´é‚Šæ¡† - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .history-item {
            border-left: 3px solid var(--accent-color);      /* å¼·èª¿è‰²å·¦å´é‚Šæ¡† */
        }

        /* æ­·å²è¨˜éŒ„æ—¥æœŸæ–‡å­—é¡è‰² - æ‡‰ç”¨ä¸»é¡Œè®Šé‡ */
        .history-date {
            color: var(--accent-color);                      /* å¼·èª¿è‰²æ–‡å­— */
        }

        /* åŒæ­¥æ—‹è½‰å‹•ç•« */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ============================================
        * åº•éƒ¨å›ºå®šåˆ©ç‡é¡¯ç¤ºæ¬„
        * ============================================ */

        /* å›ºå®šåº•éƒ¨çš„åˆ©ç‡é¡¯ç¤ºå®¹å™¨ */
        .fixed-rate-footer {
            position: fixed;                              /* å›ºå®šå®šä½ */
            bottom: 0;                                    /* è²¼é½Šåº•éƒ¨ */
            left: 0;                                      /* è²¼é½Šå·¦å´ */
            right: 0;                                     /* è²¼é½Šå³å´ */
            background-color: var(--primary-color);     /* ä½¿ç”¨æ¬¡è¦èƒŒæ™¯è‰² */
            border-top: 2px solid var(--accent-color);    /* é ‚éƒ¨é‚Šæ¡†ä½¿ç”¨å¼·èª¿è‰² */
            padding: 6px 10px 15px 10px;                   /* å…§éƒ¨é–“è· */
            display: flex;                                /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            align-items: center;                          /* å‚ç›´å±…ä¸­ */
            justify-content: center;                      /* æ°´å¹³å±…ä¸­ */
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);  /* å‘ä¸Šçš„é™°å½±æ•ˆæœ */
            z-index: 900;                                 /* å±¤ç´šè¨­å®šï¼Œä½æ–¼å½ˆå‡ºè¦–çª— */
            transition: all 0.3s ease;                    /* å¹³æ»‘éæ¸¡æ•ˆæœ */
        }

        /* footer ä¸­çš„åˆ©ç‡é¡¯ç¤ºé …ç›® */
        .rate-display-item {
            display: flex;                                /* ä½¿ç”¨å½ˆæ€§å¸ƒå±€ */
            align-items: center;                          /* å‚ç›´å±…ä¸­ */
            gap: 4px;                                     /* é …ç›®é–“è· */
        }

        /* footer ä¸­çš„æ¨™é¡Œæ–‡å­— - ä½£å¾Œå’Œç¨…ä½£å¾Œçš„æ¨™é¡Œ */
        .rate-footer-label {
            font-size: 18px;                              /* æ–‡å­—å¤§å° - å¾16pxå¢åŠ åˆ°18px */
            color: var(--accent-color);                   /* ä½¿ç”¨å¼·èª¿è‰²ï¼ˆæ©˜è‰²ï¼‰ */
            font-weight: normal;                            /* ç²—é«”æ–‡å­— - å¾normalæ”¹ç‚ºboldè®“æ–‡å­—æ›´æ˜é¡¯ */
            white-space: nowrap;                          /* é˜²æ­¢æ–‡å­—æ›è¡Œ */
        }

        /* footer ä¸­çš„åˆ©ç‡è¼¸å…¥æ¡† - é¡¯ç¤ºä½£å¾Œå’Œç¨…ä½£å¾Œåˆ©ç‡çš„æ•¸å€¼æ¡† */
        .rate-footer-input {
            width: 70px;                                  /* å›ºå®šå¯¬åº¦ - å¾60pxå¢åŠ åˆ°70pxä»¥å®¹ç´è¼ƒå¤§çš„æ–‡å­— */
            padding: 5px 7px;                             /* å…§éƒ¨é–“è· - ç¨å¾®å¢åŠ è®“æ•¸å­—é¡¯ç¤ºæ›´èˆ’é© */
            background-color: var(--input-bg);            /* ä½¿ç”¨è¼¸å…¥æ¡†èƒŒæ™¯è‰²ï¼ˆæ·±è‰²èƒŒæ™¯ï¼‰ */
            color: var(--text-color);                     /* ä½¿ç”¨æ–‡å­—é¡è‰²ï¼ˆç™½è‰²æˆ–ä¸»é¡Œè‰²ï¼‰ */
            border: 1px solid var(--border-color);        /* é‚Šæ¡†é¡è‰² */
            border-radius: 4px;                           /* åœ“è§’æ•ˆæœ */
            font-size: 18px;                              /* æ–‡å­—å¤§å° - å¾16pxå¢åŠ åˆ°18px */
            text-align: right;                            /* æ–‡å­—é å³å°é½Šï¼ˆæ•¸å­—é€šå¸¸é å³ï¼‰ */
            font-weight: normal;                            /* ç²—é«”æ–‡å­— - å¾normalæ”¹ç‚ºboldè®“æ•¸å­—æ›´æ˜é¡¯ */
            cursor: default;                              /* é è¨­æ¸¸æ¨™ï¼ˆå› ç‚ºé€™æ˜¯å”¯è®€æ¬„ä½ï¼‰ */
        }

        /* footer ä¸­çš„ç™¾åˆ†æ¯”ç¬¦è™Ÿ - %ç¬¦è™Ÿçš„æ¨£å¼ */
        .rate-footer-percent {
            font-size: 18px;                              /* æ–‡å­—å¤§å° - å¾16pxå¢åŠ åˆ°18pxé…åˆæ•¸å­—å¤§å° */
            color: var(--text-color);                     /* ä½¿ç”¨ä¸»é¡Œæ–‡å­—é¡è‰² */
            margin-left: -12px;                           /* å·¦å´è² é–“è· - ç¨å¾®èª¿æ•´ä»¥é…åˆè¼ƒå¤§çš„è¼¸å…¥æ¡† */
            font-weight: normal;                            /* æ–°å¢ç²—é«”æ•ˆæœè®“%ç¬¦è™Ÿæ›´æ˜é¡¯ */
        }

        /* å…©å€‹åˆ©ç‡é¡¯ç¤ºä¹‹é–“çš„åˆ†éš”å™¨ - ä½£å¾Œå’Œç¨…ä½£å¾Œä¹‹é–“çš„å‚ç›´åˆ†éš”ç·š */
        .rate-footer-separator {
            width: 30px;                                  /* åˆ†éš”å™¨å¯¬åº¦ - ç¨å¾®å¢åŠ å¯¬åº¦ */
            height: 2px;                                  /* é«˜åº¦ - å¾1pxå¢åŠ åˆ°2pxè®“åˆ†éš”ç·šæ›´æ˜é¡¯ */
            background-color: var(--border-color);        /* ä½¿ç”¨é‚Šæ¡†é¡è‰²ï¼ˆé€šå¸¸æ˜¯ç°è‰²ï¼‰ */
            margin: 0 18px;                               /* å·¦å³é–“è· - ç¨å¾®å¢åŠ ä»¥é…åˆè¼ƒå¤§çš„å…ƒç´  */
            opacity: 0.7;                                 /* æ–°å¢é€æ˜åº¦è®“åˆ†éš”ç·šä¸æœƒå¤ªçªå…€ */
        }

        /* ç•¶é é¢æœ‰åº•éƒ¨ footer æ™‚ï¼Œèª¿æ•´ä¸»è¦å…§å®¹çš„åº•éƒ¨é–“è· */
        body.has-rate-footer {
            padding-bottom: 20px;                         /* ç‚º footer é ç•™ç©ºé–“ */
        }

        /* éš±è— footer çš„æ¨£å¼é¡åˆ¥ */
        .fixed-rate-footer.hidden {
            display: none !important;                     /* å¼·åˆ¶éš±è— */
        }

        /* åˆä½µçš„æ¯å¹´/æ¯æœˆåˆ©æ¯æ¬„ä½çš„ç‰¹æ®Šæ¨£å¼ */
        .combined-interest-row {
            display: flex !important;
            align-items: center !important;
            /* ç¢ºä¿æ¬„ä½å…§å®¹é©ç•¶åˆ†ä½ˆ */
            justify-content: flex-start !important;
        }

        /* ç¬¬ä¸€å€‹æ¨™ç±¤çš„çµ±ä¸€å¯¬åº¦ - è®“æ‰€æœ‰åˆä½µæ¬„ä½çš„ç¬¬ä¸€å€‹æ¨™ç±¤å°é½Š */
        .combined-interest-row .label:first-child {
            width: 75px !important;          /* çµ±ä¸€ç¬¬ä¸€å€‹æ¨™ç±¤å¯¬åº¦ */
            font-size: 16px !important;      /* ä¿æŒå­—é«”å¤§å° */
            margin-right: 4px !important;    /* å³å´é–“è· */
            text-align: right !important;    /* æ–‡å­—é å³å°é½Š */
            flex-shrink: 0;                 /* é˜²æ­¢æ¨™ç±¤è¢«å£“ç¸® */
        }

        /* ç¬¬äºŒå€‹æ¨™ç±¤çš„çµ±ä¸€å¯¬åº¦ */
        .combined-interest-row .label:not(:first-child) {
            width: 65px !important;          /* çµ±ä¸€ç¬¬äºŒå€‹æ¨™ç±¤å¯¬åº¦ */
            font-size: 16px !important;      /* ä¿æŒå­—é«”å¤§å° */
            margin-right: 4px !important;    /* å³å´é–“è· */
            margin-left: 4px !important;     /* å·¦å´é–“è· */
            text-align: right !important;    /* æ–‡å­—é å³å°é½Š */
            flex-shrink: 0;                 /* é˜²æ­¢æ¨™ç±¤è¢«å£“ç¸® */
        }

        /* çµ±ä¸€æ‰€æœ‰åˆä½µæ¬„ä½çš„è¼¸å…¥æ¡†å¯¬åº¦ */
        .combined-interest-row input {
            width: 85px !important;          /* å¢åŠ è¼¸å…¥æ¡†å¯¬åº¦ä»¥é¡¯ç¤ºè¼ƒå¤§æ•¸å€¼ */
            font-size: 16px !important;      /* ä¿æŒå­—é«”å¤§å° */
            flex-shrink: 0;                 /* é˜²æ­¢è¼¸å…¥æ¡†è¢«å£“ç¸® */
        }

        /* åˆ†éš”ç¬¦è™Ÿçš„ç²¾ç¢ºå®šä½ */
        .interest-separator {
            color: var(--accent-color);
            margin: 0 8px;                   /* å·¦å³é–“è·å„8px */
            font-weight: bold;
            font-size: 18px;
            flex-shrink: 0;                 /* é˜²æ­¢åˆ†éš”ç¬¦è¢«å£“ç¸® */
            /* è¨­å®šå›ºå®šä½ç½®ä»¥ç¢ºä¿å°é½Š */
            position: relative;
            left: 0;
        }

        .interest-separator {
            color: var(--accent-color);
            margin: 0 8px;
            font-weight: bold;
            font-size: 18px;
        }

        /* å­æ¨™ç±¤æ¨£å¼ï¼ˆæ¯å¹´ã€æ¯æœˆï¼‰ */
        .sub-label {
            
            font-size: 16px;  /* ç¨å¾®å°ä¸€é»çš„å­—é«” */
            margin: 0 6px;  /* å·¦å³é–“è· */
        }

        /* ç‰¹åˆ¥é‡å°ç™¾è¬åˆ©æ¯å’Œä¸€è¬åˆ©æ¯æ¬„ä½çš„è¼¸å…¥æ¡†å¯¬åº¦èª¿æ•´ */
        /* å› ç‚ºé€™å…©å€‹æ¬„ä½çš„æ•¸å€¼é€šå¸¸è¼ƒå°ï¼Œæ‰€ä»¥ç¸®æ¸›å¯¬åº¦ */
        .million-interest-row input,
        .ten-thousand-interest-row input {
            width: 64px !important;          /* ç¸®å°è¼¸å…¥æ¡†å¯¬åº¦ï¼ˆåŸæœ¬æ˜¯85pxï¼‰ */
            font-size: 16px !important;      /* ä¿æŒå­—é«”å¤§å°ä¸è®Š */
        }

        /* èª¿æ•´ç™¾è¬åˆ©æ¯å’Œä¸€è¬åˆ©æ¯æ¬„ä½çš„å­æ¨™ç±¤ï¼ˆæ¯å¹´ã€æ¯æœˆï¼‰å¯¬åº¦ */
        .million-interest-row .sub-label,
        .ten-thousand-interest-row .sub-label {
            width: auto !important;          /* è‡ªå‹•å¯¬åº¦ */
            margin: 0 8px !important;        /* æ¸›å°‘å·¦å³é–“è· */
            font-size: 16px !important;      /* ç¨å¾®ç¸®å°å­—é«” */
        }

        /* èª¿æ•´ç™¾è¬åˆ©æ¯å’Œä¸€è¬åˆ©æ¯æ¬„ä½çš„ä¸»æ¨™ç±¤å¯¬åº¦ */
        .million-interest-row .label:first-child,
        .ten-thousand-interest-row .label:first-child {
            width: 76px !important;          /* ç¨å¾®ç¸®å°æ¨™ç±¤å¯¬åº¦ï¼ˆåŸæœ¬æ˜¯75pxï¼‰ */
        }

    </style>

</head>
<body class="has-rate-footer">

	<!-- headeråœ¨iframeæ¨¡å¼ä¸‹è¢«éš±è—ï¼Œç”±ä¸»é é¢æä¾›çµ±ä¸€çš„header -->
    <div class="header-container" style="display: none;">
        <h1>å°æœ‹å‹å°ˆç”¨è¨ˆç®—æ©Ÿ</h1>
    </div>
	
    <div class="time-display-wrapper">
        <div id="timeDisplay" class="sticky-header">
            <div style="display: flex; justify-content: center; width: 100%;">
                <span class="time-label">å ±åƒ¹æ™‚é–“</span>
                <span id="currentTime"></span>
            </div>
        </div>
    </div>
    
    <div class="input-button-group">
        <div class="row editable-field">
            <span class="label">æœŸæ•¸</span>
            <input type="text" id="period" step="0.1" readonly>
            <button onclick="clearField('period')">æ¸…é™¤</button>
        </div>
    
        <div id="periodButtons">
            <button onclick="adjustPeriod(-1)">-1</button>
            <button onclick="setPeriod(13)">åº•</button>
            <button onclick="setPeriod(24)">2</button>
            <button onclick="setPeriod(36)">3</button>
            <button onclick="setPeriod(48)">4</button>
            <button onclick="setPeriod(60)">5</button>
            <button onclick="setPeriod(72)">6</button>
            <button onclick="adjustPeriod(1)">+1</button>
        </div>
    </div>

    <div class="input-button-group">
        <div class="row editable-field">
            <span class="label">ç¨…å‰åˆ©ç‡</span>
            <input type="text" id="rate" step="0.001" readonly>
            <button onclick="clearField('rate')">æ¸…é™¤</button>
        </div>

        <div id="rateButtons">
            <!-- èª¿æ•´åˆ©ç‡æ¸›å°‘0.2çš„æŒ‰éµï¼Œé¡¯ç¤ºæ–‡å­—æ”¹ç‚º-.2 -->
            <button onclick="adjustRate(-0.2)">-.2</button>
            
            <!-- ç›´æ¥è¨­å®šåˆ©ç‡ç‚º4%çš„æŒ‰éµ -->
            <button onclick="setRate(4)">4</button>
            
            <!-- ç›´æ¥è¨­å®šåˆ©ç‡ç‚º6%çš„æŒ‰éµ -->
            <button onclick="setRate(6)">6</button>
            
            <!-- ç›´æ¥è¨­å®šåˆ©ç‡ç‚º8%çš„æŒ‰éµ -->
            <button onclick="setRate(8)">8</button>
            
            <!-- ç›´æ¥è¨­å®šåˆ©ç‡ç‚º10%çš„æŒ‰éµ -->
            <button onclick="setRate(10)">10</button>
            
            <!-- ç›´æ¥è¨­å®šåˆ©ç‡ç‚º12%çš„æŒ‰éµï¼ˆåŸæœ¬æ˜¯13ï¼Œç¾æ”¹ç‚º12ï¼‰ -->
            <button onclick="setRate(12)">12</button>
            
            <!-- æ–°å¢ï¼šç›´æ¥è¨­å®šåˆ©ç‡ç‚º14%çš„æŒ‰éµ -->
            <button onclick="setRate(14)">14</button>
            
            <!-- èª¿æ•´åˆ©ç‡å¢åŠ 0.2çš„æŒ‰éµï¼Œé¡¯ç¤ºæ–‡å­—æ”¹ç‚º+.2 -->
            <button onclick="adjustRate(0.2)">+.2</button>
        </div>
    </div>

    <div class="input-button-group">
        <div class="row editable-field">
            <span class="label">æœ¬é‡‘</span>
            <input type="text" id="principal" min="0" readonly>
            <button onclick="clearField('principal')">æ¸…é™¤</button>
        </div>

        <div id="principalButtons">
            <button onclick="adjustPrincipal(-1000000)">-100</button>
            <button onclick="adjustPrincipal(-100000)">-10</button>
            <button onclick="adjustPrincipal(-10000)">-1</button>
            <button onclick="adjustPrincipal(10000)">+1</button>
            <button onclick="adjustPrincipal(100000)">+10</button>
            <button onclick="adjustPrincipal(1000000)">+100</button>
        </div>
    </div>

    <div class="input-button-group">
        <div class="row editable-field">
            <span class="label">æœŸç¹³</span>
            <input type="text" id="payment" step="0.01" readonly>
            <button onclick="clearField('payment')">æ¸…é™¤</button>
        </div>

        <div id="PaymentduringButtons">
            <button onclick="adjustPayment(-100)">-100</button>
            <button onclick="adjustPayment(-50)">-50</button>
            <button onclick="roundPayment('down', 100)">æ¨ç™¾</button>
            <button onclick="roundPayment('up', 100)">é€²ç™¾</button>
            <button onclick="adjustPayment(50)">+50</button>
            <button onclick="adjustPayment(100)">+100</button>
        </div>
    </div>

    <!-- åˆä½µçš„ç¸½åˆ©æ¯å’Œç¸½ç¹³æ¬¾æ¬„ä½ -->
    <div class="row combined-interest-row total-payment-row">
        <!-- ç¸½åˆ©æ¯éƒ¨åˆ† -->
        <span class="label">ç¸½åˆ©æ¯</span>
        <input type="text" id="totalInterest" class="readonly medium-input" readonly>
        
        <!-- åˆ†éš”ç¬¦è™Ÿ -->
        <span class="interest-separator">|</span>
        
        <!-- ç¸½ç¹³æ¬¾éƒ¨åˆ† -->
        <span class="label">ç¸½ç¹³æ¬¾</span>
        <input type="text" id="totalPayment" class="readonly medium-input" readonly>
    </div>

    <!-- åˆä½µçš„æ¯å¹´/æ¯æœˆåˆ©æ¯æ¬„ä½ -->
    <div class="row combined-interest-row">
        <!-- æ¯å¹´åˆ©æ¯éƒ¨åˆ† -->
        <span class="label">æ¯å¹´åˆ©æ¯</span>
        <input type="text" id="yearlyInterest" class="readonly" readonly>
        
        <!-- åˆ†éš”ç¬¦è™Ÿ - ä½¿ç”¨æ›´ç¾è§€çš„è¨­è¨ˆ -->
        <span class="interest-separator">|</span>
        
        <!-- æ¯æœˆåˆ©æ¯éƒ¨åˆ† -->
        <span class="label">æ¯æœˆåˆ©æ¯</span>
        <input type="text" id="monthlyInterest" class="readonly" readonly>
    </div>

    <div class="divider-flow"></div>

    <!-- åˆä½µçš„ç¨…é‡‘å’Œç¨…å¾Œåˆ©ç‡æ¬„ä½ -->
    <div class="row combined-interest-row tax-rate-row">
        <!-- ç¨…é‡‘éƒ¨åˆ† -->
        <span class="label">ç¨…é‡‘</span>
        <input type="text" id="tax" class="readonly medium-input" readonly>
        
        <!-- åˆ†éš”ç¬¦è™Ÿ -->
        <span class="interest-separator">|</span>
        
        <!-- ç¨…å¾Œåˆ©ç‡éƒ¨åˆ† -->
        <span class="label">ç¨…å¾Œåˆ©ç‡</span>
        <input type="text" id="afterTaxRate" step="0.001" class="readonly medium-input" readonly>
    </div>

    <div class="divider-flow"></div>

    <div class="input-button-group">
        <div class="row editable-field">
            <span class="label">æ¨å»£</span>
            <input type="text" id="commission" min="0" step="1" readonly>
            <button onclick="clearCommission()">æ¸…é™¤</button>
        </div>

        <div id="commissionButtons">
            <button onclick="adjustCommission(-10000)">-è¬</button>
            <button onclick="adjustCommission(-1000)">-åƒ</button>
            <button onclick="adjustCommission(-100)">-ç™¾</button>
            <button onclick="adjustCommission(100)">+ç™¾</button>
            <button onclick="adjustCommission(1000)">+åƒ</button>
            <button onclick="adjustCommission(10000)">+è¬</button>
        </div>
    </div>

    <div class="input-button-group">
        <div class="row editable-field">
            <span class="label">æ¨å»£æ¯”ä¾‹</span>
            <input type="text" id="commissionRatio" class="readonly" readonly>
        </div>
    
        <div id="commissionPercentButtons">
            <button onclick="setCommissionPercent(1)">1%</button>
            <button onclick="setCommissionPercent(2)">2%</button>
            <button onclick="setCommissionPercent(3)">3%</button>
            <button onclick="setCommissionPercent(4)">4%</button>
            <button onclick="setCommissionPercent(5)">5%</button>
        </div>
    </div>

    <div class="row">
        <span class="label">ä½£å¾Œåˆ©ç‡</span>
        <input type="text" id="afterCommissionOnlyRate" class="readonly" readonly>
        <span class="helper-text">è³‡è²¸</span>
    </div>

    <div class="row">
        <span class="label">ç¨…ä½£å¾Œåˆ©ç‡</span>
        <input type="text" id="afterCommissionRate" class="readonly" readonly>
        <span class="helper-text">åˆ†æœŸ</span>
    </div>

    <div class="divider-flow"></div>

    <!-- åˆä½µçš„ç™¾è¬åˆ©æ¯æ¬„ä½ -->
    <div class="row combined-interest-row million-interest-row">
        <!-- ç™¾è¬åˆ©æ¯æ¨™é¡Œ -->
        <span class="label">ç™¾è¬åˆ©æ¯</span>
        
        <!-- æ¯å¹´éƒ¨åˆ† -->
        <span class="sub-label">æ¯å¹´</span>
        <input type="text" id="annualMillionInterest" class="readonly short-input" readonly>
        
        <!-- åˆ†éš”ç¬¦è™Ÿ -->
        <span class="interest-separator">|</span>
        
        <!-- æ¯æœˆéƒ¨åˆ† -->
        <span class="sub-label">æ¯æœˆ</span>
        <input type="text" id="monthlyMillionInterest" class="readonly short-input" readonly>
    </div>

    <!-- åˆä½µçš„ä¸€è¬åˆ©æ¯æ¬„ä½ -->
    <div class="row combined-interest-row ten-thousand-interest-row">
        <!-- ä¸€è¬åˆ©æ¯æ¨™é¡Œ -->
        <span class="label">ä¸€è¬åˆ©æ¯</span>
        
        <!-- æ¯å¹´éƒ¨åˆ† -->
        <span class="sub-label">æ¯å¹´</span>
        <input type="text" id="annualTenThousandInterest" class="readonly short-input" readonly>
        
        <!-- åˆ†éš”ç¬¦è™Ÿ -->
        <span class="interest-separator">|</span>
        
        <!-- æ¯æœˆéƒ¨åˆ† -->
        <span class="sub-label">æ¯æœˆ</span>
        <input type="text" id="monthlyTenThousandInterest" class="readonly short-input" readonly>
    </div>

    <div class="divider-flow"></div>

    <div class="row editable-field">
        <span class="label">è³‡é‡‘æˆæœ¬</span>
        <input type="text" id="monthlyCost" value="2.1904" step="0.0001" readonly>
        <button onclick="resetMonthlyCost()">8æœˆ</button>
    </div>

    <div class="row">
        <span class="label">Spread</span>
        <input type="text" id="spread" class="readonly" readonly>
    </div>
	
    <div class="row">
        <span class="label">NPV</span>
        <input type="text" id="fundingCost" class="readonly" readonly>
        <span class="helper-text">ç¨…ä½£å¾Œé ä¼°</span>
    </div>

    <div class="divider-flow"></div>

    <div class="function-buttons bottom-buttons">
        <div class="button-row">
            <!-- ä¿ç•™ï¼šé›è‚‰é£¯é€£çµåŠŸèƒ½ -->
            <button onclick="window.open('https://travel.chiayi.gov.tw/Folder/TurkeyRice', '_blank')">é›è‚‰é£¯</button>
            <!-- ä¿ç•™ï¼šæ¸…é™¤åŠŸèƒ½ -->
            <button onclick="clearAllFieldsExceptMonthlyCost()">æ¸…é™¤</button>
            <!-- ç§»é™¤ï¼šæˆªåœ–åŠŸèƒ½å·²åˆªé™¤ -->
        </div>
    </div>

    <div class="footer-message">å ±åƒ¹å¾Œè¨˜å¾—åƒç¢—ç«é›è‚‰é£¯å”·ï¼</div>

    <!-- æ™®é€šæç¤ºæ¨¡æ…‹æ¡† -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalTitle">æç¤º</h3>
                <button class="close-btn" onclick="hideModal()">Ã—</button>
            </div>
            <div id="modalContent" class="modal-content"></div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-primary" onclick="hideModal()">ç¢ºå®š</button>
            </div>
        </div>
    </div>

    <!-- ç¢ºèªæ¨¡æ…‹æ¡† -->
    <div id="confirmModalOverlay" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="confirmModalTitle">ç¢ºèª</h3>
                <button class="close-btn" onclick="hideConfirmModal()">Ã—</button>
            </div>
            <div id="confirmModalContent" class="modal-content"></div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="hideConfirmModal()">å–æ¶ˆ</button>
                <button id="confirmModalOk" class="modal-btn modal-btn-primary">ç¢ºå®š</button>
            </div>
        </div>
    </div>

    <div class="footer-spacing"></div>

    <!-- å›ºå®šåº•éƒ¨åˆ©ç‡é¡¯ç¤ºæ¬„ -->
    <div id="fixedRateFooter" class="fixed-rate-footer">
        <!-- ä½£å¾Œåˆ©ç‡é¡¯ç¤º -->
        <div class="rate-display-item">
            <span class="rate-footer-label">ä½£å¾Œ</span>
            <input type="text" 
                id="footerAfterCommissionOnlyRate" 
                class="rate-footer-input" 
                readonly 
                disabled>
            <span class="rate-footer-percent">%</span>
        </div>
        
        <!-- åˆ†éš”å™¨ -->
        <div class="rate-footer-separator"></div>
        
        <!-- ç¨…ä½£å¾Œåˆ©ç‡é¡¯ç¤º -->
        <div class="rate-display-item">
            <span class="rate-footer-label">ç¨…ä½£å¾Œ</span>
            <input type="text" 
                id="footerAfterCommissionRate" 
                class="rate-footer-input" 
                readonly 
                disabled>
            <span class="rate-footer-percent">%</span>
        </div>
    </div>

<script>

    window.onload = function() {
        // åˆå§‹åŒ–æ™‚é–“é¡¯ç¤º
        updateTime();
        
        // ========== è‡ªå‹•æ¢å¾©ä¸Šæ¬¡çš„è¨ˆç®—æ•¸æ“š ==========
        // èªªæ˜ï¼šé é¢è¼‰å…¥æ™‚ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰è‡ªå‹•ä¿å­˜çš„æ•¸æ“šï¼Œå¦‚æœæœ‰å°±æ¢å¾©
        // ç°¡åŒ–çš„åˆå§‹åŒ–å‡½æ•¸
        window.onload = function() {
            // åˆå§‹åŒ–æ™‚é–“é¡¯ç¤º
            updateTime();
            
            // è¨­å®šé è¨­çš„è³‡é‡‘æˆæœ¬å€¼
            const monthlyCostElement = document.getElementById('monthlyCost');
            if (monthlyCostElement && !monthlyCostElement.value) {
                monthlyCostElement.value = '2.1904';
            }
        }
        // ========== è‡ªå‹•æ¢å¾©çµæŸ ==========
    }

	// æ·»åŠ éœ‡å‹•å‡½æ•¸
	function vibrate() {
		if (navigator.vibrate) {
		navigator.vibrate(30); // éœ‡å‹•30æ¯«ç§’
		}
	}

    // æ·»åŠ é€™å€‹æ–°å‡½æ•¸åˆ°ç¬¬ä¸€å€‹ script æ¨™ç±¤å…§ï¼ŒupdateTime å‡½æ•¸ä¹‹å‰
    function calculateNPV(payment, period, principal, monthlyCost) {
        try {
            // æª¢æŸ¥è¼¸å…¥å€¼æ˜¯å¦æœ‰æ•ˆ
            if (!payment || !period || !principal || !monthlyCost || 
                isNaN(payment) || isNaN(period) || isNaN(principal) || isNaN(monthlyCost)) {
                return 0;
            }
            
            // æª¢æŸ¥æ¥µç«¯å€¼
            if (period > 1200) { // 100å¹´
                console.warn('NPVè¨ˆç®—: æœŸæ•¸éå¤§å¯èƒ½å°è‡´è¨ˆç®—ä¸æº–ç¢º');
                period = 1200; // é™åˆ¶æœ€å¤§æœŸæ•¸
            }
            
            // å°‡å¹´åˆ©ç‡è½‰æ›ç‚ºæœˆåˆ©ç‡
            const monthlyRate = monthlyCost / 100 / 12;
            
            // è™•ç†åˆ©ç‡æ¥è¿‘0çš„æƒ…æ³
            if (Math.abs(monthlyRate) < 1e-10) {
                // å¦‚æœåˆ©ç‡æ¥è¿‘0ï¼Œä½¿ç”¨ç°¡åŒ–å…¬å¼è¨ˆç®—ç¾å€¼
                return payment * period - principal;
            }
            
            // è¨ˆç®—è²¸æ¬¾ç¾å€¼ (PV) - ä½¿ç”¨æœ¬æ¯å¹³å‡æ”¤é‚„å…¬å¼
            // PV = PMT Ã— [(1 - (1 + r)^(-n)) / r]
            const presentValue = payment * (1 - Math.pow(1 + monthlyRate, -period)) / monthlyRate;
            
            // ç²å–ç¨…é‡‘å’Œæ¨å»£è²»
            const taxElement = document.getElementById('tax');
            const commissionElement = document.getElementById('commission');
            
            // è§£æç¨…é‡‘å€¼ï¼ˆç§»é™¤åƒä½åˆ†éš”ç¬¦ï¼‰
            let tax = 0;
            if (taxElement && taxElement.value) {
                tax = parseFloat(taxElement.value.replace(/,/g, '')) || 0;
            }
            
            // è§£ææ¨å»£è²»å€¼ï¼ˆç§»é™¤åƒä½åˆ†éš”ç¬¦ï¼‰
            let commission = 0;
            if (commissionElement && commissionElement.value) {
                commission = parseFloat(commissionElement.value.replace(/,/g, '')) || 0;
            }
            
            // è¨ˆç®—æœ€çµ‚NPVï¼šè²¸æ¬¾ç¾å€¼ - ç¨…é‡‘ - æ¨å»£è²» - æœ¬é‡‘
            const npv = presentValue - tax - commission - principal;
            
            // æª¢æŸ¥è¨ˆç®—çµæœæ˜¯å¦æœ‰æ•ˆ
            if (!isFinite(npv) || isNaN(npv)) {
                console.error('NPVè¨ˆç®—çµæœç„¡æ•ˆ');
                return 0;
            }
            
            return Math.round(npv);
        } catch (error) {
            console.error('NPV è¨ˆç®—éŒ¯èª¤:', error);
            return 0;
        }
    }

    // æ·»åŠ æ›´æ–°æ™‚é–“çš„å‡½æ•¸
    function updateTime() {
        const now = new Date();
        const days = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
        
        // èª¿æ•´ç‚ºå°åŒ—æ™‚é–“ (GMT+8)
        const taipeiTime = new Date(now.getTime() + (8 * 60 * 60 * 1000));
        
        const year = taipeiTime.getUTCFullYear();
        const month = String(taipeiTime.getUTCMonth() + 1).padStart(2, '0');
        const date = String(taipeiTime.getUTCDate()).padStart(2, '0');
        const day = days[taipeiTime.getUTCDay()];
        const hours = String(taipeiTime.getUTCHours()).padStart(2, '0');
        const minutes = String(taipeiTime.getUTCMinutes()).padStart(2, '0');
        const seconds = String(taipeiTime.getUTCSeconds()).padStart(2, '0');
        
        const timeString = `${year}å¹´${month}æœˆ${date}æ—¥
            æ˜ŸæœŸ${day} ${hours}:${minutes}:${seconds}`;
        document.getElementById('currentTime').textContent = timeString;
    }

    // æ¯ç§’æ›´æ–°ä¸€æ¬¡æ™‚é–“
    setInterval(updateTime, 1000);
    updateTime(); // åˆå§‹åŒ–é¡¯ç¤º

    // åŸå§‹çš„JavaScriptå‡½æ•¸ä¿æŒä¸è®Š
    function PMT(rate, nper, pv) {
        // åƒæ•¸é©—è­‰
        if (!nper || nper <= 0) {
            showToast('éŒ¯èª¤ï¼šæœŸæ•¸å¿…é ˆç‚ºæ­£æ•¸', true);
            return 0;
        }
        
        if (!pv || pv <= 0) {
            showToast('éŒ¯èª¤ï¼šæœ¬é‡‘å¿…é ˆç‚ºæ­£æ•¸', true);
            return 0;
        }
        
        // è½‰æ›åˆ©ç‡ç‚ºæœˆåˆ©ç‡
        rate = rate / 100 / 12;
        
        try {
            // ç‰¹æ®Šæƒ…æ³ï¼šåˆ©ç‡ç‚º0æˆ–æ¥è¿‘0
            if (Math.abs(rate) < 1e-10) {
                return pv / nper; // å¦‚æœåˆ©ç‡æ¥è¿‘0ï¼Œç°¡å–®åœ°å°‡æœ¬é‡‘é™¤ä»¥æœŸæ•¸
            }
            
            // æ¨™æº–ç­‰é¡æœ¬æ¯å…¬å¼
            return (pv * rate * Math.pow(1 + rate, nper)) / (Math.pow(1 + rate, nper) - 1);
        } catch (error) {
            console.error('PMT è¨ˆç®—éŒ¯èª¤:', error);
            showToast('æœŸç¹³é‡‘é¡è¨ˆç®—å‡ºéŒ¯ï¼Œè«‹æª¢æŸ¥è¼¸å…¥å€¼', true);
            return 0;
        }
    }
        
    function RATE(nper, pmt, pv) {
        // åƒæ•¸é©—è­‰
        if (!nper || nper <= 0) {
            showToast('éŒ¯èª¤ï¼šæœŸæ•¸å¿…é ˆç‚ºæ­£æ•¸', true);
            return 0;
        }
        
        if (!pmt || pmt <= 0) {
            showToast('éŒ¯èª¤ï¼šæœŸç¹³é‡‘é¡å¿…é ˆç‚ºæ­£æ•¸', true);
            return 0;
        }
        
        if (!pv || pv <= 0) {
            showToast('éŒ¯èª¤ï¼šæœ¬é‡‘å¿…é ˆç‚ºæ­£æ•¸', true);
            return 0;
        }
        
        // åŸºæœ¬æª¢æŸ¥ï¼šå¦‚æœæœŸç¹³ç¸½é¡å°æ–¼æœ¬é‡‘ï¼Œç„¡æ³•è¨ˆç®—æœ‰æ•ˆåˆ©ç‡
        if (pmt * nper <= pv) {
            showToast('éŒ¯èª¤ï¼šæœŸç¹³ç¸½é¡å¿…é ˆå¤§æ–¼æœ¬é‡‘æ‰èƒ½è¨ˆç®—åˆ©ç‡', true);
            return 0;
        }
        
        let rate = 0.1; // åˆå§‹çŒœæ¸¬å€¼ï¼Œ10%
        let step = 0.05;
        let tolerance = 0.0001;
        let maxIterations = 100;
        let iteration = 0;
        
        try {
            while (iteration < maxIterations) {
                let monthlyRate = rate / 12;
                
                // é¿å…é™¤é›¶éŒ¯èª¤
                let denominator = Math.pow(1 + monthlyRate, nper) - 1;
                if (Math.abs(denominator) < 1e-10) { // æ¥è¿‘é›¶çš„æƒ…æ³
                    rate += step; // èª¿æ•´ä¸¦ç¹¼çºŒè¿­ä»£
                    step *= 0.5;
                    iteration++;
                    continue;
                }
                
                let calculated = pv * monthlyRate * Math.pow(1 + monthlyRate, nper) / denominator;
                
                if (Math.abs(calculated - pmt) < tolerance) {
                    return Math.max(0, rate * 100); // ç¢ºä¿ä¸è¿”å›è² åˆ©ç‡
                }
                
                if (calculated > pmt) {
                    rate -= step;
                } else {
                    rate += step;
                }
                
                // ç¢ºä¿åˆ©ç‡ä¸æœƒè®Šç‚ºè² æ•¸
                rate = Math.max(0.0001, rate);
                
                step *= 0.5;
                iteration++;
            }
            
            // å¦‚æœé”åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•¸ä»æœªæ”¶æ–‚
            console.warn('RATE è¨ˆç®—æœªæ”¶æ–‚ï¼Œè¿”å›æœ€ä½³è¿‘ä¼¼å€¼');
            return Math.max(0, rate * 100);
        } catch (error) {
            console.error('RATE è¨ˆç®—éŒ¯èª¤:', error);
            showToast('åˆ©ç‡è¨ˆç®—å‡ºéŒ¯ï¼Œè«‹æª¢æŸ¥è¼¸å…¥å€¼', true);
            return 0;
        }
    }

    function calculateRate() {
        const period = parseFloat(document.getElementById('period').value);
        const principal = parseFloat(document.getElementById('principal').value.replace(/,/g, ''));
        const payment = parseFloat(document.getElementById('payment').value.replace(/,/g, ''));
        
        // ç°¡åŒ–çš„æª¢æŸ¥é‚è¼¯
        function calculateRate() {
            const period = parseFloat(document.getElementById('period').value);
            const principal = parseFloat(document.getElementById('principal').value.replace(/,/g, ''));
            const payment = parseFloat(document.getElementById('payment').value.replace(/,/g, ''));
            
            // åŸºæœ¬é©—è­‰ - å¦‚æœä»»ä½•å€¼ç„¡æ•ˆå°±ç›´æ¥è¿”å›
            if (isNaN(period) || isNaN(principal) || isNaN(payment) || 
                period <= 0 || principal <= 0 || payment <= 0 ||
                payment * period <= principal) {
                return;
            }
            
            try {
                const rate = RATE(period, payment, principal);
                
                // æª¢æŸ¥çµæœæœ‰æ•ˆæ€§
                if (isNaN(rate) || !isFinite(rate) || rate < 0) {
                    return;
                }
                
                // æ›´æ–°çµæœ
                document.getElementById('rate').value = rate.toFixed(4);
                updateAllFields();
            } catch (error) {
                console.error('åˆ©ç‡è¨ˆç®—éŒ¯èª¤:', error);
            }
        }
        
        try {
            const rate = RATE(period, payment, principal);
            
            // æª¢æŸ¥è¨ˆç®—çµæœæ˜¯å¦æœ‰æ•ˆ
            if (isNaN(rate) || !isFinite(rate) || rate < 0) {
                if (shouldWarn) {
                    showToast('åˆ©ç‡è¨ˆç®—çµæœç„¡æ•ˆï¼Œè«‹æª¢æŸ¥è¼¸å…¥å€¼', true);
                }
                return;
            }
            
            // æª¢æŸ¥åˆ©ç‡æ˜¯å¦è¶…é20%
            if (rate > 20) {
                showToast('è­¦å‘Šï¼šè¨ˆç®—çµæœé¡¯ç¤ºåˆ©ç‡è¶…é20%ï¼Œå¯èƒ½ä¸ç¬¦åˆä¸€èˆ¬è²¸æ¬¾æ¢ä»¶', true);
            }
            
            // é™åˆ¶åˆ©ç‡é¡¯ç¤ºçš„å°æ•¸ä½æ•¸ä¸¦æ›´æ–°ç•Œé¢ï¼Œä¸æˆªæ–·è¶…é20%çš„æ•¸å€¼
            document.getElementById('rate').value = rate.toFixed(4);
            updateAllFields();
        } catch (error) {
            console.error('åˆ©ç‡è¨ˆç®—éŒ¯èª¤:', error);
            if (shouldWarn) {
                showToast('è¨ˆç®—åˆ©ç‡æ™‚å‡ºéŒ¯', true);
            }
        }
    }

    function calculatePayment() {
        const period = parseFloat(document.getElementById('period').value);
        const rate = parseFloat(document.getElementById('rate').value);
        const principal = parseFloat(document.getElementById('principal').value.replace(/,/g, ''));
        
        // åªæœ‰ç•¶è‡³å°‘ä¸‰å€‹æ¬„ä½å·²å¡«å¯«æ™‚æ‰é¡¯ç¤ºè­¦å‘Š
        const filledFields = countFilledFields();
        const shouldWarn = filledFields >= 3;
        
        // æª¢æŸ¥æ‰€æœ‰è¼¸å…¥ä¸¦æä¾›å…·é«”éŒ¯èª¤è¨Šæ¯
        if (shouldWarn) {
            if (isNaN(period) || period <= 0) {
                showToast('è«‹è¼¸å…¥æœ‰æ•ˆçš„æœŸæ•¸', true);
                return;
            }
            
            if (isNaN(rate) || rate <= 0) {
                showToast('è«‹è¼¸å…¥æœ‰æ•ˆçš„åˆ©ç‡', true);
                return;
            }
            
            if (isNaN(principal) || principal <= 0) {
                showToast('è«‹è¼¸å…¥æœ‰æ•ˆçš„æœ¬é‡‘', true);
                return;
            }
        } else {
            // å¦‚æœæ¬„ä½æ•¸ä¸è¶³ï¼Œä½†è¼¸å…¥ç„¡æ•ˆï¼Œç›´æ¥è¿”å›
            if (isNaN(period) || isNaN(rate) || isNaN(principal) || 
                period <= 0 || rate <= 0 || principal <= 0) {
                return;
            }
        }
        
        try {
            // é™åˆ¶æ¥µç«¯å€¼
            const safeRate = Math.min(Math.max(rate, 0.0001), 50); // é™åˆ¶åˆ©ç‡åœ¨åˆç†ç¯„åœå…§
            const safePeriod = Math.min(Math.max(period, 1), 999); // é™åˆ¶æœŸæ•¸ä¸è¶…é999æœŸ
            
            const payment = PMT(safeRate, safePeriod, principal);
            
            // æª¢æŸ¥è¨ˆç®—çµæœæ˜¯å¦æœ‰æ•ˆ
            if (isNaN(payment) || !isFinite(payment) || payment <= 0) {
                if (shouldWarn) {
                    showToast('è¨ˆç®—çµæœç„¡æ•ˆï¼Œè«‹æª¢æŸ¥è¼¸å…¥å€¼', true);
                }
                return;
            }
            
            // å››æ¨äº”å…¥ç‚ºæ•´æ•¸ä¸¦æ ¼å¼åŒ–
            document.getElementById('payment').value = formatNumberWithCommas(Math.round(payment));
            updateAllFields();
        } catch (error) {
            console.error('æœŸç¹³é‡‘é¡è¨ˆç®—éŒ¯èª¤:', error);
            if (shouldWarn) {
                showToast('è¨ˆç®—æœŸç¹³é‡‘é¡æ™‚å‡ºéŒ¯', true);
            }
        }
    }


    function updateAllFields() {
        // ç²å–åŸºæœ¬å€¼ - éœ€è¦å…ˆç§»é™¤åƒä½åˆ†éš”ç¬¦å†è½‰æ›ç‚ºæ•¸å­—
        const period = parseFloat(document.getElementById('period').value);
        const rate = parseFloat(document.getElementById('rate').value);
        const principal = parseFloat(document.getElementById('principal').value.replace(/,/g, '')) || 0;
        const payment = parseFloat(document.getElementById('payment').value.replace(/,/g, '')) || 0;
        const monthlyCost = parseFloat(document.getElementById('monthlyCost').value);

        // æœŸæ•¸æª¢æŸ¥
        const periodInput = document.getElementById('period');
        if (period <= 12) {
            periodInput.classList.add('warning-text');
        } else {
            periodInput.classList.remove('warning-text');
        }

        // æª¢æŸ¥å››å€‹åŸºæœ¬è¼¸å…¥æ¡†æ˜¯å¦éƒ½æœ‰å€¼
        const hasAllRequiredValues = period && rate && principal && payment && 
                                    !isNaN(period) && !isNaN(rate) && !isNaN(principal) && !isNaN(payment);

        // è¨ˆç®—ä¸¦é¡¯ç¤ºç¸½ç¹³æ¬¾
        const totalPaymentField = document.getElementById('totalPayment');
        if (hasAllRequiredValues) {
            // è¨ˆç®—ç¸½ç¹³æ¬¾
            const totalPaymentValue = payment * period;
            // ç¸½ç¹³æ¬¾æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            totalPaymentField.value = formatNumberWithCommas(Math.round(totalPaymentValue));
        } else {
            // å¦‚æœç¼ºå°‘ä»»ä½•å¿…è¦å€¼ï¼Œæ¸…ç©ºç¸½ç¹³æ¬¾è¼¸å…¥æ¡†
            totalPaymentField.value = '';
        }

        // è¨ˆç®—ä¸¦é¡¯ç¤ºç¸½åˆ©æ¯
        const totalInterestField = document.getElementById('totalInterest');
        if (hasAllRequiredValues) {
            // è¨ˆç®—ç¸½åˆ©æ¯
            const totalInterest = (payment * period) - principal;
            // ç¸½åˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            totalInterestField.value = formatNumberWithCommas(Math.round(totalInterest));
        } else {
            // å¦‚æœç¼ºå°‘ä»»ä½•å¿…è¦å€¼ï¼Œæ¸…ç©ºç¸½åˆ©æ¯è¼¸å…¥æ¡†
            totalInterestField.value = '';
        }

        // è¨ˆç®—ä¸¦é¡¯ç¤ºæ¯å¹´åˆ©æ¯
        const yearlyInterestField = document.getElementById('yearlyInterest');
        if (hasAllRequiredValues) {
            // è¨ˆç®—æ¯å¹´åˆ©æ¯ = ç¸½åˆ©æ¯ Ã· æœŸæ•¸ Ã— 12
            const totalInterest = (payment * period) - principal;
            const yearlyInterest = (totalInterest / period) * 12;
            // æ¯å¹´åˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            yearlyInterestField.value = formatNumberWithCommas(Math.round(yearlyInterest));
        } else {
            // å¦‚æœç¼ºå°‘ä»»ä½•å¿…è¦å€¼ï¼Œæ¸…ç©ºæ¯å¹´åˆ©æ¯è¼¸å…¥æ¡†
            yearlyInterestField.value = '';
        }

        // è¨ˆç®—ä¸¦é¡¯ç¤ºæ¯æœˆåˆ©æ¯
        const monthlyInterestField = document.getElementById('monthlyInterest');
        if (hasAllRequiredValues) {
            // è¨ˆç®—æ¯æœˆåˆ©æ¯ = æ¯å¹´åˆ©æ¯ Ã· 12
            const totalInterest = (payment * period) - principal;
            const yearlyInterest = (totalInterest / period) * 12;
            const monthlyInterest = yearlyInterest / 12;
            // æ¯æœˆåˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            monthlyInterestField.value = formatNumberWithCommas(Math.round(monthlyInterest));
        } else {
            // å¦‚æœç¼ºå°‘ä»»ä½•å¿…è¦å€¼ï¼Œæ¸…ç©ºæ¯æœˆåˆ©æ¯è¼¸å…¥æ¡†
            monthlyInterestField.value = '';
        }

        // è¨ˆç®—ç¨…é‡‘ - åŒæ¨£éœ€è¦æª¢æŸ¥ç¸½åˆ©æ¯æ˜¯å¦å·²è¨ˆç®—
        const taxField = document.getElementById('tax');
        if (hasAllRequiredValues) {
            const totalInterest = (payment * period) - principal;
            const tax = totalInterest / 21;
            taxField.value = formatNumberWithCommas(tax.toFixed(2));
        } else {
            taxField.value = '';
        }

        // è¨ˆç®—ç¨…å¾Œåˆ©ç‡ - åŒæ¨£éœ€è¦æª¢æŸ¥å¿…è¦å€¼
        const afterTaxRateInput = document.getElementById('afterTaxRate');
        if (hasAllRequiredValues) {
            const totalInterest = (payment * period) - principal;
            const tax = totalInterest / 21;
            const afterTaxRate = RATE(period, payment, principal + tax);
            afterTaxRateInput.value = afterTaxRate.toFixed(4);
            
            // æª¢æŸ¥ç¨…å¾Œåˆ©ç‡æ˜¯å¦è¶…é20%
            if (afterTaxRate > 20) {
                afterTaxRateInput.classList.add('warning-text');
                if (countFilledFields() >= 3) {
                    showToast('è­¦å‘Šï¼šç¨…å¾Œåˆ©ç‡è¶…é20%ï¼Œå¯èƒ½ä¸ç¬¦åˆä¸€èˆ¬è²¸æ¬¾æ¢ä»¶', true);
                }
            } else if (afterTaxRate <= 2) {
                afterTaxRateInput.classList.add('warning-text');
            } else {
                afterTaxRateInput.classList.remove('warning-text');
            }
        } else {
            afterTaxRateInput.value = '';
            afterTaxRateInput.classList.remove('warning-text');
        }

        // ä½£é‡‘æ ¼å¼åŒ–ç‚ºæ•´æ•¸ä¸¦å¸¶åƒä½åˆ†éš”ç¬¦
        const commission = parseFloat(document.getElementById('commission').value.replace(/,/g, '')) || 0;
        document.getElementById('commission').value = formatNumberWithCommas(Math.round(commission));
        
        // æª¢æŸ¥ä½£é‡‘æ˜¯å¦è¶…éç¸½åˆ©æ¯çš„45%
        const commissionInput = document.getElementById('commission');
        if (hasAllRequiredValues) {
            const totalInterest = (payment * period) - principal;
            if (commission >= totalInterest * 0.45) {
                commissionInput.classList.add('warning-text');
                // æ–°å¢è­¦å‘Šæç¤º
                showToast('è«‹æ³¨æ„æ¨å»£è²»èˆ‡ç¸½åˆ©æ¯æ¯”ä¾‹ï¼', true);
            } else {
                commissionInput.classList.remove('warning-text');
            }
        } else {
            commissionInput.classList.remove('warning-text');
        }

        // è¨ˆç®—ä¸¦æ›´æ–°æ¨å»£è²»æ¯”ä¾‹
        const commissionRatioInput = document.getElementById('commissionRatio');
        if (principal > 0 && commission > 0) {
            const commissionRatio = commission / principal * 100;
            commissionRatioInput.value = commissionRatio.toFixed(2);
            
            // æª¢æŸ¥æ¨å»£è²»æ¯”ä¾‹æ˜¯å¦è¶…é5%
            if (commissionRatio > 5) {
                commissionRatioInput.classList.add('warning-text');
            } else {
                commissionRatioInput.classList.remove('warning-text');
            }
        } else {
            commissionRatioInput.value = '';
            commissionRatioInput.classList.remove('warning-text');
        }

        // è¨ˆç®—ä½£å¾Œåˆ©ç‡
        const afterCommissionOnlyRateInput = document.getElementById('afterCommissionOnlyRate');
        if (hasAllRequiredValues) {
            try {
                // è¨ˆç®—ä½£å¾Œåˆ©ç‡ï¼ˆåªè€ƒæ…®ä½£é‡‘ï¼Œä¸è€ƒæ…®ç¨…é‡‘ï¼‰
                const afterCommissionOnlyRate = RATE(period, payment, principal + commission);
                
                // æª¢æŸ¥çµæœæ˜¯å¦æœ‰æ•ˆ
                if (isNaN(afterCommissionOnlyRate) || !isFinite(afterCommissionOnlyRate)) {
                    afterCommissionOnlyRateInput.value = "è¨ˆç®—éŒ¯èª¤";
                    afterCommissionOnlyRateInput.classList.add('warning-text');
                } else {
                    // ä½£å¾Œåˆ©ç‡ä¸éœ€è¦åƒä½åˆ†éš”ç¬¦
                    afterCommissionOnlyRateInput.value = afterCommissionOnlyRate.toFixed(4);
                    if (afterCommissionOnlyRate <= 2) {
                        afterCommissionOnlyRateInput.classList.add('warning-text');
                    } else {
                        afterCommissionOnlyRateInput.classList.remove('warning-text');
                    }
                }
            } catch (error) {
                console.error('ä½£å¾Œåˆ©ç‡è¨ˆç®—éŒ¯èª¤:', error);
                afterCommissionOnlyRateInput.value = "è¨ˆç®—éŒ¯èª¤";
                afterCommissionOnlyRateInput.classList.add('warning-text');
            }
        } else {
            afterCommissionOnlyRateInput.value = '';
            afterCommissionOnlyRateInput.classList.remove('warning-text');
        }

        // è¨ˆç®—ç¨…ä½£å¾Œåˆ©ç‡
        // è¨ˆç®—ç¨…ä½£å¾Œåˆ©ç‡
        const afterCommissionRateInput = document.getElementById('afterCommissionRate');
        if (hasAllRequiredValues) {
            try {
                const totalInterest = (payment * period) - principal;
                const tax = totalInterest / 21;
                
                // æª¢æŸ¥è¨ˆç®—æ˜¯å¦åˆç†
                const totalCost = principal + tax + commission;
                if (totalCost >= payment * period) {
                    // å¦‚æœæˆæœ¬è¶…éç¸½é‚„æ¬¾é¡ï¼Œç„¡æ³•è¨ˆç®—æœ‰æ•ˆåˆ©ç‡
                    afterCommissionRateInput.value = "N/A";
                    afterCommissionRateInput.classList.add('warning-text');
                    
                    // åŒæ™‚æ›´æ–° Spread
                    const spreadInput = document.getElementById('spread');
                    spreadInput.value = "N/A";
                    spreadInput.classList.add('warning-text');
                } else {
                    // æ­£å¸¸è¨ˆç®—
                    const afterCommissionRate = RATE(period, payment, principal + tax + commission);
                    
                    // æª¢æŸ¥çµæœæ˜¯å¦æœ‰æ•ˆ
                    if (isNaN(afterCommissionRate) || !isFinite(afterCommissionRate)) {
                        afterCommissionRateInput.value = "è¨ˆç®—éŒ¯èª¤";
                        afterCommissionRateInput.classList.add('warning-text');
                    } else {
                        // ç¨…ä½£å¾Œåˆ©ç‡ä¸éœ€è¦åƒä½åˆ†éš”ç¬¦
                        afterCommissionRateInput.value = afterCommissionRate.toFixed(4);
                        if (afterCommissionRate <= 2) {
                            afterCommissionRateInput.classList.add('warning-text');
                        } else {
                            afterCommissionRateInput.classList.remove('warning-text');
                        }
                        
                        // è¨ˆç®— Spread
                        const spread = afterCommissionRate - monthlyCost;
                        // Spread ä¸éœ€è¦åƒä½åˆ†éš”ç¬¦
                        const spreadInput = document.getElementById('spread');
                        spreadInput.value = spread.toFixed(4);
                        if (spread <= 0) {
                            spreadInput.classList.add('warning-text');
                        } else {
                            spreadInput.classList.remove('warning-text');
                        }
                    }
                }
            } catch (error) {
                console.error('ç¨…ä½£å¾Œåˆ©ç‡è¨ˆç®—éŒ¯èª¤:', error);
                afterCommissionRateInput.value = "è¨ˆç®—éŒ¯èª¤";
                afterCommissionRateInput.classList.add('warning-text');
                
                document.getElementById('spread').value = '';
                document.getElementById('spread').classList.remove('warning-text');
            }
        } else {
            afterCommissionRateInput.value = '';
            afterCommissionRateInput.classList.remove('warning-text');
            
            document.getElementById('spread').value = '';
            document.getElementById('spread').classList.remove('warning-text');
        }
        
        // è¨ˆç®—ç™¾è¬åˆ©æ¯ç›¸é—œ
        if (rate > 0) {
            // ç™¾è¬åˆ©æ¯è¨ˆç®—
            const millionPayment = PMT(rate, 12, 1000000);
            const annualMillionInterest = (millionPayment * 12) - 1000000;
            
            // ç™¾è¬æ¯å¹´åˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            document.getElementById('annualMillionInterest').value = formatNumberWithCommas(Math.round(annualMillionInterest));
            // ç™¾è¬æ¯æœˆåˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            document.getElementById('monthlyMillionInterest').value = formatNumberWithCommas(Math.round(annualMillionInterest / 12));
            
            // ä¸€è¬åˆ©æ¯
            const tenThousandPayment = PMT(rate, 12, 10000);
            const annualTenThousandInterest = (tenThousandPayment * 12) - 10000;
            
            // ä¸€è¬æ¯å¹´åˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            document.getElementById('annualTenThousandInterest').value = formatNumberWithCommas(Math.round(annualTenThousandInterest));
            // ä¸€è¬æ¯æœˆåˆ©æ¯æ ¼å¼åŒ–ç‚ºæ•´æ•¸å¸¶åƒä½åˆ†éš”ç¬¦
            document.getElementById('monthlyTenThousandInterest').value = formatNumberWithCommas(Math.round(annualTenThousandInterest / 12));
        } else {
            document.getElementById('annualMillionInterest').value = '';
            document.getElementById('monthlyMillionInterest').value = '';
            document.getElementById('annualTenThousandInterest').value = '';
            document.getElementById('monthlyTenThousandInterest').value = '';
        }
        
        // è¨ˆç®— NPV
        const npvValue = calculateNPV(
            payment,
            period,
            principal,
            monthlyCost
        );
        
        // æ›´æ–° NPV é¡¯ç¤ºï¼Œå¸¶åƒä½åˆ†éš”ç¬¦
        const fundingCostInput = document.getElementById('fundingCost');
        if (hasAllRequiredValues) {
            fundingCostInput.value = formatNumberWithCommas(npvValue);
            
            // æ›´æ–°è­¦å‘Šæ¨£å¼
            if (npvValue < 0) {
                fundingCostInput.classList.add('warning-text');
            } else {
                fundingCostInput.classList.remove('warning-text');
            }
        } else {
            fundingCostInput.value = '';
            fundingCostInput.classList.remove('warning-text');
        }

        // æ›´æ–°åº•éƒ¨ footer çš„åˆ©ç‡é¡¯ç¤º
        const footerAfterCommissionOnlyRate = document.getElementById('footerAfterCommissionOnlyRate');
        const footerAfterCommissionRate = document.getElementById('footerAfterCommissionRate');
        
        if (footerAfterCommissionOnlyRate) {
            // å¾ä½£å¾Œåˆ©ç‡è¼¸å…¥æ¡†å–å¾—å€¼
            const afterCommissionOnlyValue = document.getElementById('afterCommissionOnlyRate').value;
            footerAfterCommissionOnlyRate.value = afterCommissionOnlyValue;
            
            // å¦‚æœæœ‰è­¦å‘Šæ¨£å¼ï¼Œä¹Ÿå¥—ç”¨åˆ° footer
            if (document.getElementById('afterCommissionOnlyRate').classList.contains('warning-text')) {
                footerAfterCommissionOnlyRate.classList.add('warning-text');
            } else {
                footerAfterCommissionOnlyRate.classList.remove('warning-text');
            }
        }
        
        if (footerAfterCommissionRate) {
            // å¾ç¨…ä½£å¾Œåˆ©ç‡è¼¸å…¥æ¡†å–å¾—å€¼
            const afterCommissionValue = document.getElementById('afterCommissionRate').value;
            footerAfterCommissionRate.value = afterCommissionValue;
            
            // å¦‚æœæœ‰è­¦å‘Šæ¨£å¼ï¼Œä¹Ÿå¥—ç”¨åˆ° footer
            if (document.getElementById('afterCommissionRate').classList.contains('warning-text')) {
                footerAfterCommissionRate.classList.add('warning-text');
            } else {
                footerAfterCommissionRate.classList.remove('warning-text');
            }
        }
    }

    // åœ¨ clearField å‡½æ•¸ä¹‹å‰æ·»åŠ é€™å€‹æ–°å‡½æ•¸
    // ä¿®æ”¹ validatePrincipalInput å‡½æ•°
    function validatePrincipalInput(input) {
        // ç§»é™¤è´Ÿå·ï¼Œç¡®ä¿ä¸ºæ­£æ•´æ•°
        let value = Math.floor(Math.abs(parseFloat(input.value))) || 0;
        
        // å¦‚æœè¾“å…¥ä¸º0ï¼Œè®¾ç½®ä¸ºæœ€å°å€¼1
        if (value <= 0) {
            value = 1;
        }
        
        // æ›´æ–°è¾“å…¥æ¡†å€¼å¹¶æ ¼å¼åŒ–
        input.value = formatNumberWithCommas(value);
        
        // æ›´æ–°ç›¸å…³è®¡ç®—
        updateAllFields();
    }

    function clearField(fieldId) {
        vibrate();
        document.getElementById(fieldId).value = '';
    }

    function clearCommission() {
        vibrate();
        document.getElementById('commission').value = '';
        updateAllFields(); // æ›´æ–°æ‰€æœ‰æ¬„ä½
    }

    function adjustPeriod(delta) {
        vibrate();
        const periodField = document.getElementById('period');
        const currentValue = parseFloat(periodField.value) || 0;
        periodField.value = currentValue + delta;
        calculatePayment();
    }

    function setPeriod(value) {
        vibrate();
        document.getElementById('period').value = value;
        
        // æª¢æŸ¥å…¶ä»–å¿…è¦è¼¸å…¥æ˜¯å¦å·²æœ‰å€¼
        const rate = parseFloat(document.getElementById('rate').value);
        const principal = parseFloat(document.getElementById('principal').value.replace(/,/g, ''));
        
        if (!isNaN(rate) && !isNaN(principal) && rate > 0 && principal > 0) {
            calculatePayment(); // åªæœ‰ç•¶å…¶ä»–å¿…è¦å€¼éƒ½å­˜åœ¨æ™‚æ‰è¨ˆç®—
        }
    }

    function adjustRate(delta) {
        vibrate();
        const rateField = document.getElementById('rate');
        const currentValue = parseFloat(rateField.value) || 0;
        const newRate = currentValue + delta;
        
        // æª¢æŸ¥æ–°åˆ©ç‡æ˜¯å¦è¶…é20%
        if (newRate > 20) {
            showToast('è­¦å‘Šï¼šåˆ©ç‡è¶…é20%ï¼Œå¯èƒ½ä¸ç¬¦åˆä¸€èˆ¬è²¸æ¬¾æ¢ä»¶', true);
        }
        
        rateField.value = newRate.toFixed(4);
        calculatePayment();
    }

    function setRate(value) {
        vibrate();
        // æª¢æŸ¥æ–°åˆ©ç‡æ˜¯å¦è¶…é20%
        if (value > 20) {
            showToast('è­¦å‘Šï¼šåˆ©ç‡è¶…é20%ï¼Œå¯èƒ½ä¸ç¬¦åˆä¸€èˆ¬è²¸æ¬¾æ¢ä»¶', true);
        }
        
        document.getElementById('rate').value = value;
        calculatePayment();
    }

    function validateCommissionInput(input) {
        // ç§»é™¤å°æ•¸é»
        let value = parseInt(input.value) || 0;
        
        // å¦‚æœæ˜¯è² æ•¸ï¼Œè¨­ç‚º0
        if (value < 0) {
            value = 0;
        }
        
        // æ›´æ–°è¼¸å…¥æ¡†çš„å€¼ç‚ºæ•´æ•¸
        input.value = Math.floor(value);
        
        // æ›´æ–°ç›¸é—œè¨ˆç®—
        updateAllFields();
    }

    function adjustCommission(delta) {
        vibrate();
        const commissionField = document.getElementById('commission');
        
        // ç²å–ç•¶å‰å€¼ï¼Œå¦‚æœç‚ºç©ºå‰‡é è¨­ç‚º0ï¼Œç§»é™¤åƒä½åˆ†éš”ç¬¦
        const currentValue = parseFloat(commissionField.value.replace(/,/g, '')) || 0;
        
        // è¨ˆç®—æ–°å€¼
        const newValue = Math.max(0, currentValue + delta);
        
        // æ›´æ–°è¼¸å…¥æ¡†çš„å€¼ï¼Œä½¿ç”¨ Math.floor å–æ•´æ•¸ä¸¦æ·»åŠ åƒä½åˆ†éš”ç¬¦
        commissionField.value = formatNumberWithCommas(Math.floor(newValue));
        
        // æ›´æ–°æ‰€æœ‰ç›¸é—œæ¬„ä½çš„è¨ˆç®—
        updateAllFields();
    }

    function setCommissionPercent(percent) {
        vibrate(); // è§¸ç™¼éœ‡å‹•
        
        // ç²å–æœ¬é‡‘å€¼ï¼ˆç§»é™¤åƒä½åˆ†éš”ç¬¦ï¼‰
        const principal = parseFloat(document.getElementById('principal').value.replace(/,/g, '')) || 0;
        
        if (principal <= 0) {
            showToast('è«‹å…ˆè¼¸å…¥æœ‰æ•ˆçš„æœ¬é‡‘é‡‘é¡', true);
            return;
        }
        
        // è¨ˆç®—å°æ‡‰ç™¾åˆ†æ¯”çš„é‡‘é¡ï¼Œä¸¦ç„¡æ¢ä»¶æ¨å»è‡³æ•´æ•¸
        const commissionAmount = Math.floor(principal * (percent / 100));
        
        // æ›´æ–°æ¨å»£è¼¸å…¥æ¡†çš„å€¼ï¼Œä¸¦æ·»åŠ åƒä½åˆ†éš”ç¬¦
        document.getElementById('commission').value = formatNumberWithCommas(commissionAmount);
        
        // æ›´æ–°ç›¸é—œæ¬„ä½çš„è¨ˆç®—
        updateAllFields();
    }

    // ä¿®æ”¹ adjustPrincipal å‡½æ•°
    function adjustPrincipal(delta) {
        vibrate();
        const principalField = document.getElementById('principal');
        // ç§»é™¤åƒä½åˆ†éš”ç¬¦åå†è½¬æ¢ä¸ºæ•°å­—
        const currentValue = parseFloat(principalField.value.replace(/,/g, '')) || 0;
        // è®¡ç®—æ–°å€¼ï¼Œç¡®ä¿æ˜¯æ­£æ•´æ•°
        const newValue = Math.max(1, Math.floor(currentValue + delta)); // ç¡®ä¿æœ€å°å€¼ä¸º1ä¸”ä¸ºæ•´æ•°
        // æ·»åŠ åƒä½åˆ†éš”ç¬¦æ˜¾ç¤º
        principalField.value = formatNumberWithCommas(newValue);
        calculatePayment();
        updateAllFields();
    }

    // ä¿®æ”¹ roundPayment å‡½æ•°ä»¥ä¿æŒæ­£æ•°é™åˆ¶
    function roundPayment(direction, base) {
        vibrate();
        const paymentField = document.getElementById('payment');
        // ç§»é™¤åƒä½åˆ†éš”ç¬¦åå†è½¬æ¢ä¸ºæ•°å­—
        let value = parseFloat(paymentField.value.replace(/,/g, '')) || 0;
        
        if (direction === 'down') {
            value = Math.floor(value / base) * base;
        } else {
            value = Math.ceil(value / base) * base;
        }
        
        // ç¡®ä¿å€¼ä¸ºæ­£æ•´æ•°
        value = Math.max(1, Math.round(value));
        
        // æ·»åŠ åƒä½åˆ†éš”ç¬¦æ˜¾ç¤ºï¼Œä¸å†ä¿ç•™å°æ•¸ä½
        paymentField.value = formatNumberWithCommas(value);
        calculateRate(); // ç¡®ä¿è¿™ä¸ªè°ƒç”¨èƒ½æ­£ç¡®è®¡ç®—ç¨å‰åˆ©ç‡
    }

    // ä¿®æ”¹ adjustPayment å‡½æ•°
    function adjustPayment(delta) {
        vibrate();
        const paymentField = document.getElementById('payment');
        // ç§»é™¤åƒä½åˆ†éš”ç¬¦åå†è½¬æ¢ä¸ºæ•°å­—
        const currentValue = parseFloat(paymentField.value.replace(/,/g, '')) || 0;
        // è®¡ç®—æ–°å€¼ï¼Œç¡®ä¿æ˜¯æ­£æ•´æ•°
        const newValue = Math.max(1, Math.round(currentValue + delta)); // ä½¿ç”¨Math.roundç¢ºä¿æ˜¯æ•´æ•¸
        // æ·»åŠ åƒä½åˆ†éš”ç¬¦æ˜¾ç¤ºï¼Œä¸å†ä¿ç•™å°æ•¸
        paymentField.value = formatNumberWithCommas(newValue);
        calculateRate(); // ç¡®ä¿è¿™ä¸ªè°ƒç”¨èƒ½æ­£ç¡®è®¡ç®—ç¨å‰åˆ©ç‡
    }

    document.addEventListener('DOMContentLoaded', function() {
        // ç‚ºç›¸é—œè¼¸å…¥æ¬„ä½æ·»åŠ äº‹ä»¶ç›£è½
        const inputIds = ['period', 'payment', 'principal', 'monthlyCost'];
        inputIds.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('input', updateAllFields);
                element.addEventListener('change', updateAllFields);
            }
        });
    });

    // é¡¯ç¤ºä¸€èˆ¬æ¨¡æ…‹æ¡†
    function showModal(title, content) {
        document.getElementById('modalTitle').textContent = title || 'æç¤º';
        document.getElementById('modalContent').innerHTML = content;
        document.getElementById('modalOverlay').style.display = 'flex';
        
        // æ·»åŠ èƒŒæ™¯é»æ“Šé—œé–‰åŠŸèƒ½
        document.getElementById('modalOverlay').onclick = function(event) {
            if (event.target === this) {
                hideModal();
            }
        };
    }

    // éš±è—ä¸€èˆ¬æ¨¡æ…‹æ¡†
    function hideModal() {
        document.getElementById('modalOverlay').style.display = 'none';
    }

    // é¡¯ç¤ºç¢ºèªæ¨¡æ…‹æ¡†
    function showConfirmModal(title, content, confirmCallback) {
        document.getElementById('confirmModalTitle').textContent = title || 'ç¢ºèª';
        document.getElementById('confirmModalContent').innerHTML = content;
        document.getElementById('confirmModalOverlay').style.display = 'flex';
        
        // è¨­å®šç¢ºèªæŒ‰éˆ•é»æ“Šäº‹ä»¶
        const confirmButton = document.getElementById('confirmModalOk');
        
        // ç§»é™¤èˆŠçš„äº‹ä»¶ç›£è½å™¨ï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰
        const newConfirmButton = confirmButton.cloneNode(true);
        confirmButton.parentNode.replaceChild(newConfirmButton, confirmButton);
        
        // æ·»åŠ æ–°çš„äº‹ä»¶ç›£è½å™¨
        newConfirmButton.addEventListener('click', function() {
            hideConfirmModal();
            if (typeof confirmCallback === 'function') {
                confirmCallback();
            }
        });
        
        // æ·»åŠ èƒŒæ™¯é»æ“Šé—œé–‰åŠŸèƒ½
        document.getElementById('confirmModalOverlay').onclick = function(event) {
            if (event.target === this) {
                hideConfirmModal();
            }
        };
    }

    // éš±è—ç¢ºèªæ¨¡æ…‹æ¡†
    function hideConfirmModal() {
        document.getElementById('confirmModalOverlay').style.display = 'none';
    }

    // ç°¡åŒ–çš„æç¤ºå‡½æ•¸
    function showToast(message, isError = false, duration = 2000) {
        // ç§»é™¤ç¾æœ‰çš„ toast
        const existingToast = document.querySelector('.toast-message');
        if (existingToast) {
            document.body.removeChild(existingToast);
        }
        
        // å‰µå»ºæ–°çš„ toast
        const toast = document.createElement('div');
        toast.className = 'toast-message';
        if (isError) {
            toast.classList.add('toast-error');
        }
        toast.textContent = message;
        document.body.appendChild(toast);
        
        // è‡ªå‹•æ¶ˆå¤±
        setTimeout(() => {
            if (document.body.contains(toast)) {
                document.body.removeChild(toast);
            }
        }, duration);
    }

    // é‡ç½®è³‡é‡‘æˆæœ¬ç‚ºé è¨­å€¼çš„å‡½æ•¸
    function resetMonthlyCost() {
        // éœ‡å‹•æ•ˆæœ
        vibrate();
        
        // å°‡è³‡é‡‘æˆæœ¬è¨­ç‚ºé è¨­å€¼ 2.1904
        document.getElementById('monthlyCost').value = '2.1904';
        
        // æ›´æ–°æ‰€æœ‰ç›¸é—œè¨ˆç®—
        updateAllFields();
        
        // é¡¯ç¤ºæç¤ºè¨Šæ¯
        showToast('å·²é‡ç½®è³‡é‡‘æˆæœ¬ç‚ºé è¨­å€¼');
    }

    // æ¸…ç©ºæ‰€æœ‰æ¬„ä½é™¤äº†è³‡é‡‘æˆæœ¬
    function clearAllFieldsExceptMonthlyCost() {
        // éœ‡å‹•æ•ˆæœ
        vibrate();
        
        // è¦æ¸…ç©ºçš„æ¬„ä½IDåˆ—è¡¨ - å·²ç§»é™¤å®¢æˆ¶ç™¼ç¥¨ã€ç‡Ÿæ¥­ç¨…ã€æœªç¨…é‡‘é¡ã€ç™¼ç¥¨å¤§å¯«ã€ç¸½ç¹³å¤§å¯«ç›¸é—œæ¬„ä½
        const fieldsToReset = [
            'period', 'rate', 'principal', 'payment', 
            'totalPayment', 'totalInterest', 'tax', 'afterTaxRate', 
            'commission', 'commissionRatio', 'afterCommissionRate',
            'afterCommissionOnlyRate',     // ä½£å¾Œåˆ©ç‡
            'annualMillionInterest', 'monthlyMillionInterest',
            'annualTenThousandInterest', 'monthlyTenThousandInterest',
            'spread', 'fundingCost', 'monthlyInterest', 'yearlyInterest'
        ];
        
        // æ¸…ç©ºæ¯å€‹æ¬„ä½
        fieldsToReset.forEach(fieldId => {
            const element = document.getElementById(fieldId);
            if (element) {  // æª¢æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œé¿å…éŒ¯èª¤
                // å°æ–¼ä¸€èˆ¬ input å…ƒç´ ï¼Œä½¿ç”¨ value ä¾†æ¸…ç©º
                element.value = '';
                // ç§»é™¤ä»»ä½•è­¦å‘Šæ¨£å¼
                element.classList.remove('warning-text');
            }
        });

        // å°‡è³‡é‡‘æˆæœ¬é‡ç½®ç‚ºé è¨­å€¼ï¼Œè€Œä¸æ˜¯æ¸…ç©º
        const monthlyCostElement = document.getElementById('monthlyCost');
        if (monthlyCostElement) {
            monthlyCostElement.value = '2.1904';
        }
        
        // é¡¯ç¤ºæç¤ºè¨Šæ¯
        showToast('å·²æ¸…ç©ºæ‰€æœ‰æ¬„ä½');

        // æ¸…ç©º footer é¡¯ç¤º
        const footerAfterCommissionOnlyRate = document.getElementById('footerAfterCommissionOnlyRate');
        const footerAfterCommissionRate = document.getElementById('footerAfterCommissionRate');
        
        if (footerAfterCommissionOnlyRate) {
            footerAfterCommissionOnlyRate.value = '';
            footerAfterCommissionOnlyRate.classList.remove('warning-text');
        }
        
        if (footerAfterCommissionRate) {
            footerAfterCommissionRate.value = '';
            footerAfterCommissionRate.classList.remove('warning-text');
        }

    }

    // å…¨å±€è®Šé‡
    let currentInputField = null;
    let calculatorValue = "0";
    let calculatorOperator = null;
    let calculatorFirstValue = null;
    let calculatorWaitingForSecondValue = false;
    let calculatorHistory = ""; // æ–°å¢ï¼šè¨ˆç®—éç¨‹è¨˜éŒ„

    // é–‹å•Ÿè¨ˆç®—æ©Ÿè¼¸å…¥å™¨
    function openCalculator(inputId, title) {
        currentInputField = inputId;
        document.getElementById('inputModalTitle').textContent = title;
        
        // ç²å–ç•¶å‰è¼¸å…¥æ¡†çš„å€¼
        const currentValue = document.getElementById(inputId).value;
        
        if (currentValue && currentValue !== '') {
            // å¦‚æœè¼¸å…¥æ¡†æœ‰å€¼ï¼Œä½¿ç”¨è©²å€¼åˆå§‹åŒ–è¨ˆç®—å™¨
            calculatorValue = currentValue.replace(/,/g, ''); // ç§»é™¤åƒä½åˆ†éš”ç¬¦
            document.getElementById('calculatorDisplay').textContent = calculatorValue;
        } else {
            // å¦‚æœè¼¸å…¥æ¡†æ²’æœ‰å€¼ï¼Œä½¿ç”¨ "0"
            calculatorValue = "0";
            document.getElementById('calculatorDisplay').textContent = calculatorValue;
        }
        
        calculatorOperator = null;
        calculatorFirstValue = null;
        calculatorWaitingForSecondValue = false;
        calculatorHistory = ""; // æ¸…ç©ºè¨ˆç®—æ­·å²
        document.getElementById('calculatorHistory').textContent = ""; // æ¸…ç©ºæ­·å²é¡¯ç¤º
        document.getElementById('historyScrollIndicator').style.opacity = '0'; // éš±è—æ»¾å‹•æŒ‡ç¤ºå™¨
        
        document.getElementById('numberInputModal').style.display = 'flex';
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // é—œé–‰æ¨¡æ…‹æ¡†
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // è¨ˆç®—æ©Ÿæ•¸å­—è¼¸å…¥
    function calculatorInput(num) {
        if (calculatorWaitingForSecondValue) {
            calculatorValue = num.toString();
            calculatorWaitingForSecondValue = false;
        } else {
            calculatorValue = calculatorValue === '0' ? num.toString() : calculatorValue + num.toString();
        }
        document.getElementById('calculatorDisplay').textContent = calculatorValue;
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // è¨ˆç®—æ©Ÿå°æ•¸é»è¼¸å…¥
    function calculatorDecimal() {
        // å¦‚æœæ­£åœ¨ç­‰å¾…ç¬¬äºŒå€‹å€¼ï¼Œé‡ç½®é¡¯ç¤º
        if (calculatorWaitingForSecondValue) {
            calculatorValue = '0';
            calculatorWaitingForSecondValue = false;
        }
        
        // å¦‚æœç•¶å‰å€¼ä¸åŒ…å«å°æ•¸é»ï¼Œå‰‡æ·»åŠ 
        if (!calculatorValue.includes('.')) {
            calculatorValue += '.';
        }
        
        document.getElementById('calculatorDisplay').textContent = calculatorValue;
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // è¨ˆç®—æ©Ÿæ¸…é™¤
    function calculatorClear() {
        calculatorValue = '0';
        calculatorOperator = null;
        calculatorFirstValue = null;
        calculatorWaitingForSecondValue = false;
        calculatorHistory = ""; // æ¸…ç©ºè¨ˆç®—æ­·å²
        document.getElementById('calculatorDisplay').textContent = calculatorValue;
        document.getElementById('calculatorHistory').textContent = ""; // æ¸…ç©ºæ­·å²é¡¯ç¤º
        document.getElementById('historyScrollIndicator').style.opacity = '0'; // éš±è—æ»¾å‹•æŒ‡ç¤ºå™¨
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // è¨ˆç®—æ©Ÿé€€æ ¼
    function calculatorBackspace() {
        if (calculatorValue.length > 1) {
            calculatorValue = calculatorValue.slice(0, -1);
        } else {
            calculatorValue = '0';
        }
        document.getElementById('calculatorDisplay').textContent = calculatorValue;
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // è¨ˆç®—æ©Ÿé‹ç®—ç¬¦
    function calculatorOperation(op) {
        // å¦‚æœå·²ç¶“æœ‰é‹ç®—ç¬¦åœ¨ç­‰å¾…ï¼Œå…ˆé€²è¡Œè¨ˆç®—
        if (calculatorFirstValue !== null && calculatorOperator !== null) {
            calculatorEquals();
        }
        
        calculatorFirstValue = parseFloat(calculatorValue);
        calculatorOperator = op;
        calculatorWaitingForSecondValue = true;
        
        // æ›´æ–°è¨ˆç®—æ­·å²
        let opSymbol = op;
        switch(op) {
            case '+': opSymbol = ' + '; break;
            case '-': opSymbol = ' - '; break;
            case '*': opSymbol = ' Ã— '; break;
            case '/': opSymbol = ' Ã· '; break;
        }
        
        // æ·»åŠ ç•¶å‰æ•¸å­—å’Œé‹ç®—ç¬¦åˆ°æ­·å²è¨˜éŒ„
        if (calculatorHistory === "") {
            calculatorHistory = calculatorValue + opSymbol;
        } else {
            // æª¢æŸ¥æ˜¯å¦éœ€è¦æ›è¡Œ
            if (calculatorHistory.length > 20) {
                calculatorHistory += "\n" + calculatorValue + opSymbol;
            } else {
                calculatorHistory += calculatorValue + opSymbol;
            }
        }
        
        // é¡¯ç¤ºè¨ˆç®—æ­·å²ä¸¦æª¢æŸ¥æ˜¯å¦éœ€è¦é¡¯ç¤ºæ»¾å‹•æŒ‡ç¤ºå™¨
        updateCalculatorHistory();
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // è¨ˆç®—æ©Ÿç­‰è™Ÿ
    function calculatorEquals() {
        if (calculatorFirstValue === null || calculatorOperator === null) return;
        
        const secondValue = parseFloat(calculatorValue);
        let result;
        
        // å®Œæˆæ­·å²è¨˜éŒ„çš„é‹ç®—å¼
        let completeExpression = calculatorHistory + calculatorValue + " = ";
        
        switch (calculatorOperator) {
            case '+':
                result = calculatorFirstValue + secondValue;
                break;
            case '-':
                result = calculatorFirstValue - secondValue;
                break;
            case '*':
                result = calculatorFirstValue * secondValue;
                break;
            case '/':
                // å¢åŠ é™¤é›¶æª¢æŸ¥
                if (secondValue === 0) {
                    showToast('éŒ¯èª¤ï¼šä¸èƒ½é™¤ä»¥é›¶', true);
                    calculatorClear();
                    return;
                }
                result = calculatorFirstValue / secondValue;
                break;
            default:
                return;
        }
        
        // é™åˆ¶å°æ•¸é»ä½æ•¸ï¼Œä½†ä¿ç•™æœ‰æ„ç¾©çš„æ•¸å­—
        calculatorValue = result.toString();
        if (calculatorValue.includes('.')) {
            // å¦‚æœæ˜¯å°æ•¸ï¼Œé™åˆ¶æœ€å¤šé¡¯ç¤º8ä½ï¼Œä½†å»é™¤å°¾éƒ¨ç„¡æ„ç¾©çš„é›¶
            calculatorValue = parseFloat(result.toFixed(8)).toString();
        }
        
        // æ›´æ–°é¡¯ç¤º
        document.getElementById('calculatorDisplay').textContent = calculatorValue;
        
        // æ›´æ–°æ­·å²è¨˜éŒ„ï¼Œä¿æŒè¼ƒçŸ­çš„é¡¯ç¤º
        if (completeExpression.length > 30) {
            // å¦‚æœè¡¨é”å¼å¤ªé•·ï¼Œåªé¡¯ç¤ºæœ€å¾Œçš„ç­‰è™Ÿéƒ¨åˆ†
            calculatorHistory = calculatorValue;
        } else {
            // å¦‚æœè¡¨é”å¼ä¸å¤ªé•·ï¼Œé¡¯ç¤ºå®Œæ•´è¡¨é”å¼
            calculatorHistory = completeExpression;
        }
        
        // é¡¯ç¤ºè¨ˆç®—æ­·å²ä¸¦æª¢æŸ¥æ˜¯å¦éœ€è¦é¡¯ç¤ºæ»¾å‹•æŒ‡ç¤ºå™¨
        updateCalculatorHistory();
        
        // ç‚ºä¸‹ä¸€æ¬¡è¨ˆç®—æº–å‚™
        calculatorOperator = null;
        calculatorFirstValue = parseFloat(calculatorValue);
        calculatorWaitingForSecondValue = true;
        
        // æ·»åŠ éœ‡å‹•æ•ˆæœ
        vibrate();
    }

    // ä¿®æ”¹ submitCalculatorValue å‡½æ•°
    function submitCalculatorValue() {
        if (!currentInputField) return;
        
        let value = parseFloat(calculatorValue);
        if (isNaN(value)) value = 0;
        
        // æ ¹æ®ä¸åŒè¾“å…¥æ¡†è¿›è¡ŒéªŒè¯
        switch (currentInputField) {
            case 'period':
                // æœŸæ•°ä¸éœ€è¦åƒä½åˆ†éš”ç¬¦
                value = Math.floor(value);
                if (value < 0) {
                    showToast('éŒ¯èª¤ï¼šæœŸæ•¸ä¸èƒ½ç‚ºè² æ•¸', true);
                    return;
                }
                if (value > 999) {
                    showToast('éŒ¯èª¤ï¼šæœŸæ•¸ä¸èƒ½è¶…é3ä½æ•¸', true);
                    return;
                }
                document.getElementById(currentInputField).value = value;
                break;
                
                case 'rate':
                    // åˆ©ç‡ä¸éœ€è¦åƒä½åˆ†éš”ç¬¦
                    if (value < 0) {
                        showToast('éŒ¯èª¤ï¼šåˆ©ç‡ä¸èƒ½ç‚ºè² æ•¸', true);
                        return;
                    }
                    if (value > 20) {
                        showToast('è­¦å‘Šï¼šåˆ©ç‡è¶…é20%ï¼Œå¯èƒ½ä¸ç¬¦åˆä¸€èˆ¬è²¸æ¬¾æ¢ä»¶', true);
                        // å…è¨±è¶…é20%çš„åˆ©ç‡ï¼Œä½†é¡¯ç¤ºè­¦å‘Š
                    }
                    document.getElementById(currentInputField).value = value.toFixed(4);
                    break;
                
            case 'principal':
                // æœ¬é‡‘éœ€è¦åƒä½åˆ†éš”ç¬¦å¹¶ä¸”åªèƒ½æ˜¯æ­£æ•´æ•°
                value = Math.floor(value); // ç¡®ä¿æ˜¯æ•´æ•°
                if (value <= 0) {
                    showToast('éŒ¯èª¤ï¼šæœ¬é‡‘å¿…é ˆæ˜¯æ­£æ•´æ•¸', true);
                    return;
                }
                if (value > 999999999) {
                    showToast('éŒ¯èª¤ï¼šæœ¬é‡‘ä¸èƒ½è¶…é9ä½æ•¸', true);
                    return;
                }
                document.getElementById(currentInputField).value = formatNumberWithCommas(value);
                break;
                
            case 'payment':
                // æœŸç¹³å¿…é¡»æ˜¯æ­£æ•´æ•°
                value = Math.max(1, Math.round(value)); // æ”¹ç‚ºå–æ•´æ•¸
                if (value > 999999) {
                    showToast('éŒ¯èª¤ï¼šæœŸç¹³æ¬¾é‡‘é¡ä¸èƒ½è¶…é6ä½æ•¸', true);
                    return;
                }
                document.getElementById(currentInputField).value = formatNumberWithCommas(value);
                break;
                
            case 'commission':
                // æ¨å»£éœ€è¦åƒä½åˆ†éš”ç¬¦
                value = Math.floor(value);
                if (value < 0) {
                    showToast('éŒ¯èª¤ï¼šæ¨å»£è²»å¿…é ˆç‚ºæ­£æ•´æ•¸', true);
                    return;
                }
                if (value > 999999) {
                    showToast('éŒ¯èª¤ï¼šæ¨å»£è²»ä¸èƒ½è¶…é6ä½æ•¸', true);
                    return;
                }
                document.getElementById(currentInputField).value = formatNumberWithCommas(value);
                break;

            case 'monthlyCost':
                // è³‡é‡‘æˆæœ¬ä¸éœ€è¦åƒä½åˆ†éš”ç¬¦ï¼Œä¿ç•™4ä½å°æ•¸
                if (value < 0) {
                    showToast('éŒ¯èª¤ï¼šè³‡é‡‘æˆæœ¬ä¸èƒ½ç‚ºè² æ•¸', true);
                    return;
                }
                if (value > 20) {
                    showToast('éŒ¯èª¤ï¼šè³‡é‡‘æˆæœ¬ä¸èƒ½è¶…é20', true);
                    return;
                }
                // é™åˆ¶åœ¨0.0000åˆ°20.0000ä¹‹é–“ï¼Œä¸¦ä¿ç•™4ä½å°æ•¸
                value = Math.max(0, Math.min(20, value));
                document.getElementById(currentInputField).value = value.toFixed(4);
                break;
        }
        
        // è§¦å‘ change äº‹ä»¶ä»¥æ›´æ–°ç›¸å…³è®¡ç®—
        const event = new Event('change');
        document.getElementById(currentInputField).dispatchEvent(event);
        
        // å…³é—­æ¨¡æ€æ¡†
        closeModal('numberInputModal');
        
        // æ ¹æ“šæ¬„ä½åŸ·è¡Œç›¸æ‡‰çš„è¨ˆç®—å‡½æ•¸
        if (currentInputField === 'period' || currentInputField === 'rate' || currentInputField === 'principal') {
            calculatePayment();
        } else if (currentInputField === 'payment') {
            calculateRate();
        } else if (currentInputField === 'commission' || currentInputField === 'monthlyCost') {
            // æ¨å»£è²»æˆ–è³‡é‡‘æˆæœ¬æ”¹è®Šæ™‚ï¼Œæ›´æ–°æ‰€æœ‰ç›¸é—œè¨ˆç®—
            updateAllFields();
        }
        
        // æ·»åŠ éœ‡åŠ¨æ•ˆæœ
        vibrate();
    }

    // æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼ˆå¯é‡ç”¨ç°æœ‰çš„ showToast å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰çš„è¯æ·»åŠ è¿™ä¸ªï¼‰
    function showToast(message, isError = false) {
        // æ£€æŸ¥æ˜¯å¦å·²æœ‰ toast
        const existingToast = document.querySelector('.toast-message');
        if (existingToast) {
            document.body.removeChild(existingToast);
        }
        
        // åˆ›å»ºæ–°çš„ toast
        const toast = document.createElement('div');
        toast.className = 'toast-message';
        if (isError) {
            toast.classList.add('toast-error');
        }
        toast.textContent = message;
        document.body.appendChild(toast);
        
        // 2ç§’åè‡ªåŠ¨æ¶ˆå¤±
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, 500);
        }, 2000);
    }

    // æ ¼å¼åŒ–æ•°å­— - æ·»åŠ åƒä½åˆ†éš”ç¬¦
    function formatNumberWithCommas(num) {
        if (!num && num !== 0) return '';
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // æ›´æ–°è®¡ç®—å†å²æ˜¾ç¤ºï¼Œå¹¶æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ»šåŠ¨æŒ‡ç¤ºå™¨
    function updateCalculatorHistory() {
        const historyElement = document.getElementById('calculatorHistory');
        const indicatorElement = document.getElementById('historyScrollIndicator');
        
        // æ›´æ–°å†å²å†…å®¹
        historyElement.textContent = calculatorHistory;
        
        // æ£€æŸ¥æ˜¯å¦å†…å®¹æº¢å‡ºéœ€è¦æ˜¾ç¤ºæ»šåŠ¨æŒ‡ç¤ºå™¨
        const isOverflowing = historyElement.scrollWidth > historyElement.clientWidth || 
                            historyElement.scrollHeight > historyElement.clientHeight;
        
        if (isOverflowing) {
            historyElement.classList.add('has-overflow');
        } else {
            historyElement.classList.remove('has-overflow');
        }
    }

    function countFilledFields() {
        const period = document.getElementById('period').value;
        const rate = document.getElementById('rate').value;
        const principal = document.getElementById('principal').value;
        const payment = document.getElementById('payment').value;
        
        let count = 0;
        if (period && period !== '0') count++;
        if (rate && rate !== '0') count++;
        if (principal && principal !== '0') count++;
        if (payment && payment !== '0') count++;
        
        return count;
    }

</script>
	
<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.body.classList.add('loaded');
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const header = document.querySelector('.sticky-header');
    const h1Element = document.querySelector('h1');
    
    if (!header || !h1Element) return; // æ·»åŠ æ£€æŸ¥

    window.addEventListener('scroll', function() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const headerRect = header.getBoundingClientRect();
        const h1Rect = h1Element.getBoundingClientRect();
        
        // ä½¿ç”¨æ›´ç²¾ç¡®çš„æ¡ä»¶åˆ¤æ–­
        if (scrollTop > header.offsetTop) {
            header.classList.add('is-sticky');
            if (h1Rect.bottom > 0) {
                header.classList.remove('is-sticky');
            }
        } else {
            header.classList.remove('is-sticky');
        }
    });
    });
</script>

<script>
        // åœ¨æ‰€æœ‰ JavaScript å‡½æ•¸å®šç¾©ä¹‹å¾Œæ·»åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            // è¨­ç½®è¼¸å…¥æ¡†é»æ“Šäº‹ä»¶
            document.getElementById('period').addEventListener('click', function() {
                openCalculator('period', 'è«‹è¼¸å…¥ã€æœŸæ•¸ã€‘');
            });
            
            document.getElementById('rate').addEventListener('click', function() {
                openCalculator('rate', 'è«‹è¼¸å…¥ã€ç¨…å‰åˆ©ç‡ã€‘');
            });
            
            document.getElementById('principal').addEventListener('click', function() {
                openCalculator('principal', 'è«‹è¼¸å…¥ã€æœ¬é‡‘ã€‘');
            });
            
            document.getElementById('payment').addEventListener('click', function() {
                openCalculator('payment', 'è«‹è¼¸å…¥ã€æœŸç¹³ã€‘');
            });
            
            document.getElementById('commission').addEventListener('click', function() {
                openCalculator('commission', 'è«‹è¼¸å…¥ã€æ¨å»£ã€‘');
            });

            // ç‚ºè³‡é‡‘æˆæœ¬è¼¸å…¥æ¡†æ·»åŠ é»æ“Šäº‹ä»¶
            document.getElementById('monthlyCost').addEventListener('click', function() {
                openCalculator('monthlyCost', 'è«‹è¼¸å…¥ã€è³‡é‡‘æˆæœ¬ã€‘');
            });
            
            // é»æ“Šæ¨¡æ…‹æ¡†èƒŒæ™¯é—œé–‰æ¨¡æ…‹æ¡†
            document.getElementById('numberInputModal').addEventListener('click', function(event) {
                if (event.target === this) {
                    closeModal('numberInputModal');
                }
            });
            
            // æ·»åŠ è¨ˆç®—æ­·å²çš„æ»¾å‹•åŠŸèƒ½
            const historyElement = document.getElementById('calculatorHistory');
            let isScrolling = false;
            let startX;
            let scrollLeft;

            historyElement.addEventListener('mousedown', (e) => {
                isScrolling = true;
                startX = e.pageX - historyElement.offsetLeft;
                scrollLeft = historyElement.scrollLeft;
            });

            historyElement.addEventListener('mouseleave', () => {
                isScrolling = false;
            });

            historyElement.addEventListener('mouseup', () => {
                isScrolling = false;
            });

            historyElement.addEventListener('mousemove', (e) => {
                if (!isScrolling) return;
                e.preventDefault();
                const x = e.pageX - historyElement.offsetLeft;
                const walk = (x - startX) * 2; // æ»¾å‹•é€Ÿåº¦
                historyElement.scrollLeft = scrollLeft - walk;
            });

            // æ·»åŠ è§¸æ‘¸äº‹ä»¶æ”¯æŒ
            historyElement.addEventListener('touchstart', (e) => {
                isScrolling = true;
                startX = e.touches[0].pageX - historyElement.offsetLeft;
                scrollLeft = historyElement.scrollLeft;
            });

            historyElement.addEventListener('touchend', () => {
                isScrolling = false;
            });

            historyElement.addEventListener('touchmove', (e) => {
                if (!isScrolling) return;
                const x = e.touches[0].pageX - historyElement.offsetLeft;
                const walk = (x - startX) * 2;
                historyElement.scrollLeft = scrollLeft - walk;
            });

        });
    </script>

    <!-- æ•¸å­—è¼¸å…¥å™¨æ¨¡æ…‹æ¡† -->
    <div id="numberInputModal" class="modal-overlay">
        <div class="number-input-modal">
            <div class="modal-header">
                <h3 id="inputModalTitle">æ•¸å­—è¼¸å…¥å™¨</h3>
                <button class="close-btn" onclick="closeModal('numberInputModal')">Ã—</button>
            </div>

            <div class="calculator-display-container">
                <div class="calculator-scroll-indicator" id="historyScrollIndicator"></div>
                <div class="calculator-history" id="calculatorHistory"></div>
                <div class="calculator-display" id="calculatorDisplay">0</div>
            </div>

            <div class="calculator-buttons">
                <!-- ç¬¬ä¸€è¡Œï¼šåŠŸèƒ½éµ -->
                <button onclick="calculatorClear()" class="clear">C</button>
                <button onclick="calculatorBackspace()" class="function">âŒ«</button>
                <button onclick="calculatorOperation('/')" class="operator">Ã·</button>
                <button onclick="calculatorOperation('*')" class="operator">Ã—</button>
                
                <!-- ç¬¬äºŒè¡Œï¼šæ•¸å­—å’Œæ¸›è™Ÿ -->
                <button onclick="calculatorInput(7)" class="number-btn">
                    <div class="arabic-number">7</div>
                    <div class="financial-char">æŸ’</div>
                </button>
                <button onclick="calculatorInput(8)" class="number-btn">
                    <div class="arabic-number">8</div>
                    <div class="financial-char">æŒ</div>
                </button>
                <button onclick="calculatorInput(9)" class="number-btn">
                    <div class="arabic-number">9</div>
                    <div class="financial-char">ç–</div>
                </button>
                <button onclick="calculatorOperation('-')" class="operator">âˆ’</button>
                
                <!-- ç¬¬ä¸‰è¡Œï¼šæ•¸å­—å’ŒåŠ è™Ÿ -->
                <button onclick="calculatorInput(4)" class="number-btn">
                    <div class="arabic-number">4</div>
                    <div class="financial-char">è‚†</div>
                </button>
                <button onclick="calculatorInput(5)" class="number-btn">
                    <div class="arabic-number">5</div>
                    <div class="financial-char">ä¼</div>
                </button>
                <button onclick="calculatorInput(6)" class="number-btn">
                    <div class="arabic-number">6</div>
                    <div class="financial-char">é™¸</div>
                </button>
                <button onclick="calculatorOperation('+')" class="operator">+</button>
                
                <!-- ç¬¬å››è¡Œï¼šåº•éƒ¨æ•¸å­—å’Œç­‰è™Ÿ -->
                <button onclick="calculatorInput(1)" class="number-btn">
                    <div class="arabic-number">1</div>
                    <div class="financial-char">å£¹</div>
                </button>
                <button onclick="calculatorInput(2)" class="number-btn">
                    <div class="arabic-number">2</div>
                    <div class="financial-char">è²³</div>
                </button>
                <button onclick="calculatorInput(3)" class="number-btn">
                    <div class="arabic-number">3</div>
                    <div class="financial-char">åƒ</div>
                </button>
                <button onclick="calculatorEquals()" class="equals">=</button>
                
                <!-- ç¬¬äº”è¡Œï¼šé›¶ã€å°æ•¸é»å’Œç¢ºèªéµ -->
                <button onclick="calculatorInput(0)" class="number-btn">
                    <div class="arabic-number">0</div>
                    <div class="financial-char">é›¶</div>
                </button>
                <button onclick="calculatorDecimal()" class="function">.</button>
                <button onclick="submitCalculatorValue()" class="submit">ç¢ºèªè¼¸å…¥</button>
            </div>
        </div>
    </div>

</body>
</html>